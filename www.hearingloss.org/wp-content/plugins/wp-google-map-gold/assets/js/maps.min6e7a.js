!function($,window,document,undefined){"use strict";var Map_Control=function(e){this.options=e};Map_Control.prototype.create_element=function(e,t,a){e.className="wpgmp-control-outer";var o=document.createElement("div");o.className="wpgmp-control-inner",e.appendChild(o);var i=document.createElement("div");i.className="wpgmp-control-content",i.innerHTML=a,o.appendChild(i)};var overlay_generator=function(e,t){this.tileSize=e,this.overlay_options=t};overlay_generator.prototype.getTile=function(e,t,a){var o=a.createElement("div");return o.innerHTML=e,o.style.width="200px",o.style.height="300px",o.style.fontSize=this.overlay_options.font_size+"px",o.style.borderStyle=this.overlay_options.border_style,o.style.borderWidth=this.overlay_options.border_width+"px",o.style.borderColor=this.overlay_options.border_color,o};var GoogleMaps=function(e,t){var a;this.element=e,this.map_data=$.extend({},{},t),a=this.map_data.map_options,this.settings=$.extend({min_zoom:"0",max_zoom:"19",zoom:"5",map_type_id:"ROADMAP",scroll_wheel:!0,map_visual_refresh:!1,full_screen_control:!1,full_screen_control_position:"BOTTOM_RIGHT",zoom_control:!0,zoom_control_style:"SMALL",zoom_control_position:"TOP_LEFT",map_type_control:!0,map_type_control_style:"HORIZONTAL_BAR",map_type_control_position:"RIGHT_TOP",scale_control:!0,street_view_control:!0,street_view_control_position:"TOP_LEFT",overview_map_control:!0,center_lat:"40.6153983",center_lng:"-74.2535216",draggable:!0,gesture:"auto"},{},a),this.container=$("div[rel='"+$(this.element).attr("id")+"']");var o=!1;this.map_data.map_tabs&&this.map_data.map_tabs.direction_tab&&(o=this.map_data.map_tabs.direction_tab.suppress_markers),this.directionsService=new google.maps.DirectionsService,this.directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:o}),this.drawingmanager={},this.geocoder=new google.maps.Geocoder,this.places=[],this.show_places=[],this.places_for_category_tabs=[],this.categories={},this.tabs=[],this.all_shapes=[],this.wpgmp_polylines=[],this.wpgmp_polygons=[],this.wpgmp_circles=[],this.wpgmp_shape_events=[],this.wpgmp_rectangles=[],this.per_page_value=0,this.last_remove_cat_id="",this.last_selected_cat_id="",this.last_category_chkbox_action="",this.current_amenities=[],this.route_directions=[],this.search_area="",this.filter_position="",this.filter_content="",this.markerClusterer=null,this.url_filters=[],this.infowindow_marker=new google.maps.InfoWindow,this.infobox=new InfoBox,this.wpgmp_search_form="",this.init()};GoogleMaps.prototype={init:function(){var map_obj=this;map_obj.map_data.map_property&&1==map_obj.map_data.map_property.debug_mode&&(console.log("*********WPGMP Debug Mode Output*********"),console.log("Map ID ="+map_obj.map_data.map_property.map_id),map_obj.map_data.places&&console.log("Total Locations="+map_obj.map_data.places.length),map_obj.map_data.routes&&console.log("Total Routes="+map_obj.map_data.routes.length),console.log("WPGMP Object="),console.log(map_obj.map_data),console.log("*********WPGMP Debug Mode End Output*********"));var isMobile=!1,screen_type="desktop",screen_size=$(window).width();screen_size<=480?screen_type="smartphones":screen_size>480&&screen_size<=768?screen_type="ipads":screen_size>=1824&&(screen_type="large-screens"),"desktop"!=screen_type&&1==map_obj.settings.mobile_specific&&(isMobile=!0,map_obj.settings.screens&&map_obj.settings.screens[screen_type]?(map_obj.settings.width_mobile=map_obj.settings.screens[screen_type].map_width_mobile,map_obj.settings.height_mobile=map_obj.settings.screens[screen_type].map_height_mobile,map_obj.settings.zoom=parseInt(map_obj.settings.screens[screen_type].map_zoom_level_mobile),map_obj.settings.draggable="false"!==map_obj.settings.screens[screen_type].map_draggable_mobile,map_obj.settings.scroll_wheel="false"!==map_obj.settings.screens[screen_type].map_scrolling_wheel_mobile):(map_obj.settings.width_mobile="",map_obj.settings.height_mobile=""),""!=map_obj.settings.width_mobile&&$(map_obj.element).css("width",map_obj.settings.width_mobile),""!=map_obj.settings.height_mobile&&$(map_obj.element).css("height",map_obj.settings.height_mobile));var center=new google.maps.LatLng(map_obj.settings.center_lat,map_obj.settings.center_lng);if(map_obj.map=new google.maps.Map(map_obj.element,{zoom:parseInt(map_obj.settings.zoom),center:center,disableDoubleClickZoom:!1===map_obj.settings.doubleclickzoom,scrollwheel:"true"!=map_obj.settings.scroll_wheel,zoomControl:!0===map_obj.settings.zoom_control,fullscreenControl:!0===map_obj.settings.full_screen_control,fullscreenControlOptions:{position:eval("google.maps.ControlPosition."+map_obj.settings.full_screen_control_position)},zoomControlOptions:{style:eval("google.maps.ZoomControlStyle."+map_obj.settings.zoom_control_style),position:eval("google.maps.ControlPosition."+map_obj.settings.zoom_control_position)},mapTypeControl:1==map_obj.settings.map_type_control,mapTypeControlOptions:{style:eval("google.maps.MapTypeControlStyle."+map_obj.settings.map_type_control_style),position:eval("google.maps.ControlPosition."+map_obj.settings.map_type_control_position)},scaleControl:1==map_obj.settings.scale_control,streetViewControl:1==map_obj.settings.street_view_control,streetViewControlOptions:{position:eval("google.maps.ControlPosition."+map_obj.settings.street_view_control_position)},overviewMapControl:1==map_obj.settings.overview_map_control,overviewMapControlOptions:{opened:map_obj.settings.overview_map_control},draggable:map_obj.settings.draggable,mapTypeId:eval("google.maps.MapTypeId."+map_obj.settings.map_type_id),styles:eval(map_obj.map_data.styles),minZoom:parseInt(map_obj.settings.min_zoom),maxZoom:parseInt(map_obj.settings.max_zoom),gestureHandling:map_obj.settings.gesture}),map_obj.map_loaded(),map_obj.responsive_map(),map_obj.create_markers(),map_obj.display_markers(),void 0!==map_obj.settings.google_fonts&&map_obj.load_google_fonts(map_obj.settings.google_fonts),1==map_obj.settings.map_control&&void 0!==map_obj.settings.map_control_settings){var map_control_obj=new Map_Control;$.each(map_obj.settings.map_control_settings,function(k,val){var centerControlDiv=document.createElement("div");map_control_obj.create_element(centerControlDiv,map_obj.map,val.html),centerControlDiv.index=1,map_obj.map.controls[eval("google.maps.ControlPosition."+val.position)].push(centerControlDiv)})}if(1==map_obj.settings.locateme_control&&map_obj.settings.locateme_control_position){var map_control_obj=new Map_Control,centerControlDiv=document.createElement("div");map_control_obj.create_element(centerControlDiv,map_obj.map,"<span title='"+wpgmp_local.locate_me+"' alt class='wpgmp_locateme_control "+map_obj.settings.locateme_control_position.toLowerCase()+"'></span>"),map_obj.map.controls[eval("google.maps.ControlPosition."+map_obj.settings.locateme_control_position)].push(centerControlDiv)}if(map_obj.map_data.street_view&&map_obj.set_streetview(center),map_obj.map_data.weather_layer&&map_obj.set_weather_layer(),map_obj.map_data.bicyle_layer&&map_obj.set_bicyle_layer(),map_obj.map_data.traffic_layer&&map_obj.set_traffic_layer(),map_obj.map_data.transit_layer&&map_obj.set_transit_layer(),map_obj.map_data.panoramio_layer&&map_obj.set_panoramic_layer(),map_obj.map_data.overlay_setting&&map_obj.set_overlay(),"45"==map_obj.settings.display_45_imagery&&map_obj.set_45_imagery(),!0===typeof map_obj.map_data.map_visual_refresh&&map_obj.set_visual_refresh(),map_obj.map_data.marker_cluster&&map_obj.set_marker_cluster(),map_obj.map_data.panning_control&&map_obj.set_panning_control(),map_obj.map_data.kml_layer&&map_obj.set_kml_layer(),map_obj.map_data.fusion_layer&&map_obj.set_fusion_layer(),1==map_obj.settings.search_control&&map_obj.show_search_control(),void 0!==map_obj.map_data.shapes&&void 0!==map_obj.map_data.shapes.shape&&(map_obj.opened_info=map_obj.infowindow_marker,void 0!==map_obj.map_data.shapes.shape.polygons&&map_obj.create_polygon(),void 0!==map_obj.map_data.shapes.shape.polylines&&map_obj.create_polyline(),void 0!==map_obj.map_data.shapes.shape.circles&&map_obj.create_circle(),void 0!==map_obj.map_data.shapes.shape.rectangles&&map_obj.create_rectangle()),map_obj.map_data.routes&&map_obj.create_routes(),map_obj.map_data.listing){if(map_obj.map_data.listing.default_sorting){var data_type="";"listorder"==map_obj.map_data.listing.default_sorting.orderby&&(data_type="num"),map_obj.sorting(map_obj.map_data.listing.default_sorting.orderby,map_obj.map_data.listing.default_sorting.inorder,data_type)}}else map_obj.map_data.map_tabs!==undefined&&"undefined"!=map_obj.map_data.map_tabs&&typeof map_obj.map_data.map_tabs.category_tab!==undefined&&"undefined"!==map_obj.map_data.map_tabs.category_tab&&typeof map_obj.map_data.map_tabs.category_tab.cat_tab!==undefined&&map_obj.map_data.map_tabs.category_tab.cat_tab&&(map_obj.map_data.map_tabs.category_tab.cat_post_order===undefined&&(map_obj.map_data.map_tabs.category_tab.cat_post_order="asc"),map_obj.sorting("title",map_obj.map_data.map_tabs.category_tab.cat_post_order),map_obj.map_data.places_for_category_tabs=map_obj.map_data.places,map_obj.map_data.places_for_category_tabs=map_obj.sorting_inside_tabs(map_obj.map_data.places_for_category_tabs,map_obj.map_data.map_tabs.category_tab.cat_post_order));map_obj.map_data.listing&&($(map_obj.container).on("click",".categories_filter_reset_btn",function(){$(map_obj.container).find(".wpgmp_filter_wrappers select").each(function(){$(this).find("option:first").attr("selected","selected")}),$(".wpgmp_search_input").val(""),map_obj.update_filters()}),$(map_obj.container).on("change",'[data-filter="dropdown"]',function(){map_obj.update_filters()}),$(map_obj.container).on("click",'[data-filter="checklist"]',function(){map_obj.update_filters()}),$(map_obj.container).on("click",'[data-filter="list"]',function(){$(this).hasClass("fc_selected")?$(this).removeClass("fc_selected"):$(this).addClass("fc_selected"),map_obj.update_filters()}),map_obj.display_filters_listing(),map_obj.custom_filters(),$.each(map_obj.map_data.listing.filters,function(e,t){$(map_obj.container).find('select[name="'+t+'"]').on("change",function(){map_obj.update_filters()})}),$(map_obj.container).find('[data-filter="map-sorting"]').on("change",function(){var e=$(this).val().split("__"),t="";""!==e[0]&&""!==e[1]&&(void 0!==e[2]&&(t=e[2]),map_obj.sorting(e[0],e[1],t),map_obj.update_places_listing())}),$(map_obj.container).find('[data-name="radius"]').on("change",function(){var e=$(map_obj.container).find('[data-input="wpgmp-search-text"]');if(0!==e.length){var t=e.val();t.length>=2&&""!=$(this).val()?map_obj.geocoder.geocode({address:t},function(e,t){t==google.maps.GeocoderStatus.OK&&(map_obj.search_area=e[0].geometry.location,map_obj.update_filters())}):(map_obj.search_area="",map_obj.update_filters())}}),$(map_obj.container).find('[data-filter="map-perpage-location-sorting"]').on("change",function(){map_obj.per_page_value=$(this).val(),map_obj.update_filters()}),$(map_obj.container).find('[data-input="wpgmp-search-text"]').on("keyup",function(){var e=$(this).val();$(map_obj.container).find('[data-filter="map-radius"]').val(""),map_obj.search_area="",e.length>=2&&1==map_obj.map_data.listing.apply_default_radius?e.length>=2&&map_obj.geocoder.geocode({address:e},function(e,t){t==google.maps.GeocoderStatus.OK&&(map_obj.search_area=e[0].geometry.location,map_obj.update_filters())}):map_obj.update_filters()}),"undefined"!==map_obj&&map_obj.map_data.default_amenities!=undefined&&map_obj.map_data.enableAmenitiesListing!=undefined&&map_obj.map_data.enableAmenitiesListing||$(map_obj.container).find(".location_pagination"+map_obj.map_data.map_property.map_id).pagination(map_obj.show_places.length,{callback:map_obj.display_places_listing,map_data:map_obj,items_per_page:map_obj.map_data.listing.pagination.listing_per_page,prev_text:wpgmp_local.prev,next_text:wpgmp_local.next}),$(map_obj.container).find('[data-action="wpgmp-print"]').on("click",function(){$('[data-container="wpgmp-listing-'+$(map_obj.element).attr("id")+'"]').length>0&&$('[data-container="wpgmp-listing-'+$(map_obj.element).attr("id")+'"]').print(),$('[data-container="wpgmp-custom-listing-'+$(map_obj.element).attr("id")+'"]').length>0&&$('[data-container="wpgmp-custom-listing-'+$(map_obj.element).attr("id")+'"]').print()})),$(".wpgmp-shape-delete").click(function(){map_obj.deleteSelectedShape(),$(".hiderow").hide()}),$('select[name="shape_stroke_opacity"]').change(function(){map_obj.set_shapes_options(map_obj.selectedShape)}),$('select[name="shape_stroke_weight"]').change(function(){map_obj.set_shapes_options(map_obj.selectedShape)}),$('select[name="shape_stroke_color"]').change(function(){map_obj.set_shapes_options(map_obj.selectedShape)}),$('select[name="shape_fill_opacity"]').change(function(){map_obj.set_shapes_options(map_obj.selectedShape)}),$('select[name="shape_fill_color"]').change(function(){map_obj.set_shapes_options(map_obj.selectedShape)}),$('input[name="shape_click_url"]').change(function(){map_obj.set_shapes_options(map_obj.selectedShape)}),$('textarea[name="shape_click_message"]').blur(function(){map_obj.set_shapes_options(map_obj.selectedShape)}),$("textarea[name='shape_path']").blur(function(){var e=$(this).val().split(" ");1==e.length&&(e=$(this).val().split("\n"));var t=[];$.each(e,function(e,a){var o=a.split(",");t.push(new google.maps.LatLng(o[0],o[1]))}),map_obj.selectedShape.setPath(t)}),$("input[name='shape_radius']").blur(function(){var e=parseFloat($(this).val());map_obj.selectedShape.setRadius(e)}),$("input[name='shape_center']").blur(function(){var e=$(this).val().split(",");map_obj.selectedShape.setCenter(new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])))}),$("input[name='shape_northeast']").blur(function(){var e=$(this).val().split(","),t=$("input[name='shape_southwest']").val().split(",");map_obj.selectedShape.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng(parseFloat(t[0]),parseFloat(t[1])),new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1]))))}),$("input[name='shape_southwest']").blur(function(){var e=$(this).val().split(","),t=$("input[name='shape_northeast']").val().split(",");map_obj.selectedShape.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])),new google.maps.LatLng(parseFloat(t[0]),parseFloat(t[1]))))}),$("input[name='shape_center']").blur(function(){var e=$(this).val().split(",");map_obj.selectedShape.setCenter(new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])))}),$('input[name="wpgmp_save_drawing"]').click(function(){var e=[];e.push("polylines="+map_obj.wpgmp_save_polylines().join("::")),e.push("polygons="+map_obj.wpgmp_save_polygons().join("::")),e.push("circles="+map_obj.wpgmp_save_circles().join("::")),e.push("rectangles="+map_obj.wpgmp_save_rectangles().join("::")),map_obj.wpgmp_save_shapes(e)}),void 0!==map_obj.map_data.shapes&&!0===map_obj.map_data.shapes.drawing_editable&&$(".wpgmp-overview .color").wpColorPicker({change:function(e,t){map_obj.set_shapes_options(map_obj.selectedShape)}}),$(this.container).on("click",".wpgmp_locateme_control",function(){map_obj.get_current_location(function(e){map_obj.map.setCenter(e),map_obj.map_center_marker&&map_obj.map_center_marker.setPosition(e),map_obj.set_center_circle&&map_obj.set_center_circle.setCenter(e)})}),void 0!==map_obj.map_data.map_tabs&&(this.map_widgets(),$(map_obj.container).find(".wpgmp_toggle_main_container").find("div[id^='wpgmp_tab_']").css("display","none"),map_obj.settings.infowindow_filter_only!==undefined&&!1!==map_obj.settings.infowindow_filter_only||($(map_obj.container).find("input[data-marker-category]").attr("checked",!0),$(map_obj.container).find("input[data-marker-location]").attr("checked",!0)),this.map_data.map_tabs.category_tab&&!0===this.map_data.map_tabs.category_tab.select_all&&$(map_obj.container).find('input[name="wpgmp_select_all"]').click(function(){$(this).is(":checked")?($(map_obj.container).find("input[data-marker-category]").attr("checked",!0),$(map_obj.container).find("input[data-marker-location]").attr("checked",!0),$(map_obj.container).find("input[data-marker-category]").prop("checked",!0),$(map_obj.container).find("input[data-marker-location]").prop("checked",!0)):($(map_obj.container).find("input[data-marker-category]").attr("checked",!1),$(map_obj.container).find("input[data-marker-location]").attr("checked",!1),$(map_obj.container).find("input[data-marker-category]").prop("checked",!1),$(map_obj.container).find("input[data-marker-location]").prop("checked",!1)),map_obj.update_filters()}),$(map_obj.container).find(".wpgmp_toggle_container").click(function(){$(map_obj.container).find(".wpgmp_toggle_main_container").slideToggle("slow"),$(this).text()==wpgmp_local.hide?$(this).text(wpgmp_local.show):$(this).text(wpgmp_local.hide)}),!0===map_obj.map_data.map_tabs.hide_tabs_default&&$(map_obj.container).find(".wpgmp_toggle_container").trigger("click"),$(map_obj.container).find(".wpgmp_specific_route_item").attr("checked",!0),$(map_obj.container).find(".wpgmp_toggle_main_container").find("div[id^='wpgmp_tab_']").first().css("display","block"),$(map_obj.container).on("click","li[class^='wpgmp-tab-'] a",function(){$(map_obj.container).find("li[class^='wpgmp-tab-'] a").removeClass("active"),$(this).addClass("active"),$(map_obj.container).find(".wpgmp_toggle_main_container").find("div[id^='wpgmp_tab_']").css("display","none"),$(map_obj.container).find(".wpgmp_toggle_main_container").find("#wpgmp_tab_"+$(this).parent().attr("rel")).css("display","block")}),$(map_obj.container).on("change","input[data-marker-category]",function(){var e=$(this).data("marker-category"),t=this;if($(t).data("child-cats")){var a=$(t).data("child-cats").toString();if(-1!==a.indexOf(","))var o=a.split(",");else(o=[]).push(a)}!1===$(this).is(":checked")?(map_obj.last_remove_cat_id=e,map_obj.last_category_chkbox_action="unchecked",$(t).closest('[data-container="wpgmp-category-tab-item"]').find("input[data-marker-location]").attr("checked",!1),o&&$.each(o,function(e,a){$(t).parent().parent().find('[data-marker-category="'+a+'"]').attr("checked",!1),$(t).parent().parent().find('[data-marker-category="'+a+'"]').parent().find("input[data-marker-location]").attr("checked",!1)})):(map_obj.last_selected_cat_id=e,map_obj.last_category_chkbox_action="checked",$(t).closest('[data-container="wpgmp-category-tab-item"]').find("input[data-marker-location]").attr("checked",!0),o&&$.each(o,function(e,a){$(t).parent().parent().find('[data-marker-category="'+a+'"]').attr("checked",!0),$(t).parent().parent().find('[data-marker-category="'+a+'"]').parent().find("input[data-marker-location]").attr("checked",!0)})),map_obj.update_filters()}),$(map_obj.container).find(".wpgmp_toggle_main_container").on("change",".wpgmp_specific_route_item",function(){var e=map_obj.route_directions[$(this).val()];!1===$(this).is(":checked")?e.setMap(null):e.setMap(map_obj.map)}),$(map_obj.container).on("change","input[data-marker-location]",function(){map_obj.update_filters()}),this.map_data.map_tabs.direction_tab&&!0===this.map_data.map_tabs.direction_tab.dir_tab&&$(this.container).find(".wpgmp_find_direction").click(function(){var e=$(map_obj.container).find(".start_point"),t=$(map_obj.container).find(".end_point"),a=$(map_obj.container).find('select[name="travel_mode"]').val(),o=$(map_obj.container).find('select[name="travel_unit"]').val(),i=$(map_obj.container).find(".directions-panel");if(""===$(e).val())return $(e).focus(),!1;if(""===$(t).val())return $(t).focus(),!1;var n={start:e.val(),end:t.val(),mode:a,unit:o,direction_panel:i[0],map:map_obj.map};map_obj.find_direction(n)}),$(this.container).find(".wpgmp_find_nearby_button").click(function(){var e=$(this).parent().parent(),t=$(e).find(".wpgmp_auto_suggest").data("latitude"),a=$(e).find(".wpgmp_auto_suggest").data("longitude");if(t&&a){var o=$(map_obj.container).find("input[name='wpgmp_radius']").val(),i=$(map_obj.container).find("select[name='wpgmp_route_dimension']").val(),n=$(map_obj.container).find('input[name^="wpgmp_place_types"]:checked'),s=1.60934;s="miles"==i?1.60934:1;var r=parseInt(o)*s*1e3;if(n.length>0&&t&&a){map_obj.current_amenities.length>0&&$.each(map_obj.current_amenities,function(e,t){t.marker.setMap(null)}),map_obj.amenity_infowindow=map_obj.infowindow_marker;var p=[];$.each(n,function(e,t){p.push($(t).val())});for(var _=0;_<p.length;_++){var c={location:new google.maps.LatLng(t,a),radius:r,types:[p[_]]};new google.maps.places.PlacesService(map_obj.map).nearbySearch(c,function(e,t,a){if(t==google.maps.places.PlacesServiceStatus.OK){for(var o=0;o<e.length;o++)map_obj.createMarker(e[o]);a&&a.hasNextPage&&a.nextPage()}})}map_obj.map.setCenter(new google.maps.LatLng(t,a)),!0===map_obj.map_data.map_tabs.nearby_tab.show_nearby_circle&&(void 0!==map_obj.set_nearbycenter_circle&&map_obj.set_nearbycenter_circle.setMap(null),map_obj.set_nearbycenter_circle=new google.maps.Circle({map:map_obj.map,fillColor:map_obj.map_data.map_tabs.nearby_tab.nearby_circle_fillcolor,fillOpacity:map_obj.map_data.map_tabs.nearby_tab.nearby_circle_fillopacity,strokeColor:map_obj.map_data.map_tabs.nearby_tab.nearby_circle_strokecolor,strokeOpacity:map_obj.map_data.map_tabs.nearby_tab.nearby_circle_strokeopacity,strokeWeight:map_obj.map_data.map_tabs.nearby_tab.nearby_circle_strokeweight,center:new google.maps.LatLng(t,a),radius:r}),map_obj.map.setZoom(parseInt(map_obj.map_data.map_tabs.nearby_tab.nearby_circle_zoom)))}}else $(e).find(".wpgmp_auto_suggest").focus()}),$(this.container).find(".wpgmp_mcurrent_loction").click(function(){var e=this;map_obj.get_current_location(function(t){$(e).parent().find(".wpgmp_auto_suggest").data("latitude",t.lat()),$(e).parent().find(".wpgmp_auto_suggest").data("longitude",t.lng()),map_obj.geocoder.geocode({latLng:t},function(t,a){a==google.maps.GeocoderStatus.OK?$(e).parent().find(".wpgmp_auto_suggest").val(t[0].formatted_address):console.log(a)})},function(){})})),void 0!==map_obj.map_data.geojson&&map_obj.load_json(map_obj.map_data.geojson),$("body").on("click",".wpgmp_marker_link",function(){$("html, body").animate({scrollTop:$(map_obj.container).offset().top-150},500),map_obj.open_infowindow($(this).data("marker"))});var on_event=map_obj.settings.infowindow_open_event;$(map_obj.container).on(on_event,".wpgmp_locations a[data-marker]",function(){var e=this;$("html, body").animate({scrollTop:$(map_obj.container).offset().top-150},500),setTimeout(function(){map_obj.open_infowindow($(e).data("marker"))},600)}),$(map_obj.container).on("click",".wpgmp_location_container a[data-marker]",function(){map_obj.open_infowindow($(this).data("marker"))}),map_obj.wpgmp_search_form=$(".wpgmp_auto_suggest"),map_obj.google_auto_suggest(map_obj.wpgmp_search_form),!0===map_obj.settings.show_center_circle&&map_obj.show_center_circle(),!0===map_obj.settings.show_center_marker&&map_obj.show_center_marker(),void 0!==map_obj.map_data.shapes&&!0===map_obj.map_data.shapes.drawing_editable&&this.enable_drawing(),!0===map_obj.settings.fit_bounds&&map_obj.fit_bounds(),!0===map_obj.settings.url_filters&&map_obj.apply_url_filters(),$(map_obj.container).find(".wpgmp-accordion").accordion({speed:"slow"})},load_google_fonts:function(e){e&&e.length>0&&$.each(e,function(e,t){t.indexOf(",")>=0&&(t=(t=t.split(","))[0]),t.indexOf('"')>=0&&(t=(t=t.replace('"',"")).replace('"',"")),WebFont.load({google:{families:[t]}})})},load_json:function(e){this.map.data.loadGeoJson(e)},createMarker:function(e){var t=this,a=t.map,o=(e.geometry.location,{url:e.icon,size:new google.maps.Size(25,25),scaledSize:new google.maps.Size(25,25)});e.marker=new google.maps.Marker({map:a,position:e.geometry.location,icon:o});var i="fc-infowindow-";e.marker=e.marker,e.address=e.vicinity,e.title=e.name,e.location={},e.location.onclick_action="marker";var n="",s="";i="fc-infowindow-";"post"==e.source?(s=t.settings.infowindow_geotags_setting,i="wpgmp_infowindow_post fc-item-"+t.settings.infowindow_post_skin.name):(s=t.settings.infowindow_setting,"edit_location"!=t.map_data.page&&t.settings.infowindow_skin&&(i="fc-infowindow-"+t.settings.infowindow_skin.name)),void 0===s&&(s=e.content);var r,p=void 0!==e.photos?e.photos[0].getUrl({maxWidth:400,maxHeight:400}):e.icon;r="<div class='fc-feature-img amenities_image'><img alt='"+e.vicinity+"' src='"+p+"' class='wpgmp_marker_image wpgmp_amenities_image' /></div>";var _={"{marker_id}":e.id,"{marker_title}":e.name,"{marker_address}":e.vicinity,"{marker_latitude}":e.geometry.location.lat(),"{marker_longitude}":e.geometry.location.lng(),"{marker_city}":"","{marker_state}":"","{marker_country}":"","{marker_postal_code}":"","{marker_zoom}":"","{marker_icon}":e.icon,"{marker_category}":e.types[0],"{marker_message}":e.content,"{marker_image}":r};for(var c in _)_[c]!=undefined&&"undefined"!=_[c]||(_[c]="");if(s){var l=s=s.replace(/{[^{}]+}/g,function(e){return e in _?_[e]:""}),m=$("<div/>").html(l);$(m).find(".wpgmp_extra_field:contains('wpgmp_empty')").remove(),$(m).find(".wpgmp_empty").prev().remove(),$(m).find(".wpgmp_empty").remove(),n=$(m).prop("outerHTML").toString()}n=""===n?!0===t.settings.map_infowindow_customisations&&!0===t.settings.show_infowindow_header?'<div class="wpgmp_infowindow '+i+'"><div class="wpgmp_iw_head"><div class="wpgmp_iw_head_content">'+e.name+'</div></div><div class="wpgmp_iw_content">'+e.vicinity+"</div></div>":'<div class="wpgmp_infowindow '+i+'"><div class="wpgmp_iw_content">'+e.content+"</div></div>":!0===t.settings.map_infowindow_customisations&&!0===t.settings.show_infowindow_header?'<div class="wpgmp_infowindow '+i+'"><div class="wpgmp_iw_head"><div class="wpgmp_iw_head_content">'+e.name+'</div></div><div class="wpgmp_iw_content">'+n+"</div></div>":'<div class="wpgmp_infowindow '+i+'"><div class="wpgmp_iw_content">'+n+"</div></div>",e.infowindow_data=n,e.infowindow=t.infowindow_marker;var d=t.settings.infowindow_open_event;t.event_listener(e.marker,d,function(){$.each(t.places,function(e,t){t.infowindow.close(),t.marker.setAnimation(null)}),t.openInfoWindow(e)}),t.places.push(e)},wpgmp_image_type_overlays:function(){var e=new google.maps.ImageMapType({getTileUrl:function(e,t){return["http://www.gstatic.com/io2010maps/tiles/5/L2_",t,"_",e.x,"_",e.y,".png"].join("")},tileSize:new google.maps.Size(256,256)});this.map.overlayMapTypes.push(e)},wpgmp_within_radius:function(e,t){var a=$(this.container).find('[data-name="radius"]').val(),o=this.map_data.listing.radius_dimension;return 1==this.map_data.listing.apply_default_radius&&""==a&&(a=this.map_data.listing.default_radius,o=this.map_data.listing.default_radius_dimension),a="km"==o?1e3*parseInt(a):1609.34*parseInt(a),google.maps.geometry.spherical.computeDistanceBetween(e.marker.getPosition(),t)<a},wpgmp_get_nearby_locations:function(e,t,a){var o=0;o=1.61*a;var n=[],s=Math.PI,r={};return $.each(this.places,function(a,p){var _=p.location.lat,c=p.location.lng,l=(_-e)*(s/180),m=(c-t)*(s/180),d=e*(s/180),g=_*(s/180),u=Math.sin(l/2)*Math.sin(l/2)+Math.sin(m/2)*Math.sin(m/2)*Math.cos(d)*Math.cos(g),h=6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)));0!==o?h<=o&&(n[h]=p,n.sort(function(e,t){return e-t}),r["marker"+p.id]=h):(n[h]=markers[i],n.sort(function(e,t){return e-t}),r["marker"+p.id]=h)}),sortest_markers=this.wpgmp_sort_distance(r),sortest_markers},wpgmp_sort_distance:function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push({key:a,value:e[a]});return t.sort(function(e,t){return e.value-t.value}),t},get_user_position:function(){var e=this;navigator.geolocation.getCurrentPosition(function(t){e.user_lat_lng=new google.maps.LatLng(t.coords.latitude,t.coords.longitude)},function(e){},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},marker_bind:function(e){var t=this;google.maps.event.addListener(e,"drag",function(){var a=e.getPosition();t.geocoder.geocode({latLng:a},function(e,a){if(a==google.maps.GeocoderStatus.OK&&($("#googlemap_address").val(e[0].formatted_address),$(".google_city").val(t.wpgmp_finddata(e[0],"administrative_area_level_3")||t.wpgmp_finddata(e[0],"locality")),$(".google_state").val(t.wpgmp_finddata(e[0],"administrative_area_level_1")),$(".google_country").val(t.wpgmp_finddata(e[0],"country")),e[0].address_components))for(var o=0;o<e[0].address_components.length;o++)for(var i=0;i<e[0].address_components[o].types.length;i++)"postal_code"==e[0].address_components[o].types[i]&&$(".google_postal_code").val(e[0].address_components[o].long_name)}),$(".google_latitude").val(a.lat()),$(".google_longitude").val(a.lng())})},google_auto_suggest:function(e){var t=this;e.each(function(){var e=this,a=new google.maps.places.Autocomplete(this);if(wpgmp_local.wpgmp_country_specific&&1==wpgmp_local.wpgmp_country_specific&&a.setComponentRestrictions({country:wpgmp_local.wpgmp_countries}),a.bindTo("bounds",t.map),"location_address"==$(this).attr("name")){t.infowindow_marker;var o=new google.maps.Marker({map:t.map,draggable:!0,anchorPoint:new google.maps.Point(0,-29)});t.marker_bind(o),google.maps.event.addListener(a,"place_changed",function(){var e=a.getPlace();if(e.geometry){if(e.geometry.viewport?t.map.fitBounds(e.geometry.viewport):(t.map.setCenter(e.geometry.location),t.map.setZoom(17)),$(".google_latitude").val(e.geometry.location.lat()),$(".google_longitude").val(e.geometry.location.lng()),$(".google_city").val(t.wpgmp_finddata(e,"administrative_area_level_3")||t.wpgmp_finddata(e,"locality")),$(".google_state").val(t.wpgmp_finddata(e,"administrative_area_level_1")),$(".google_country").val(t.wpgmp_finddata(e,"country")),e.address_components)for(var i=0;i<e.address_components.length;i++)for(var n=0;n<e.address_components[i].types.length;n++)if("postal_code"==e.address_components[i].types[n]){var s=e.address_components[i].long_name;$(".google_postal_code").val(s)}o.setPosition(e.geometry.location),o.setVisible(!0)}})}else google.maps.event.addListener(a,"place_changed",function(){var o=a.getPlace();t.map.setCenter(o.geometry.location),$(e).data("longitude",o.geometry.location.lng()),$(e).data("latitude",o.geometry.location.lat()),"wpgmp_search_input"==$(e).attr("name")&&(void 0!==t.map_data.listing&&void 0!==t.map_data.listing.display_radius_filter&&!0===t.map_data.listing.display_radius_filter&&(t.search_area=o.geometry.location),t.update_filters())})})},wpgmp_finddata:function(e,t){for(var a="",o=0;o<e.address_components.length;++o){var i=e.address_components[o];$.each(i.types,function(e,o){o==t&&(a=i.long_name)})}return a},clearSelection:function(){this.selectedShape&&(this.selectedShape.setEditable(!1),this.selectedShape=null)},setSelection:function(e){this.clearSelection(),this.selectedShape=e,this.selectedShape.setEditable(!0)},deleteSelectedShape:function(){var e;if(this.selectedShape){for(e in this.wpgmp_circles)this.wpgmp_circles[e]==this.selectedShape&&this.wpgmp_circles.splice(e,1);for(e in this.wpgmp_rectangles)this.wpgmp_rectangles[e]==this.selectedShape&&this.wpgmp_rectangles.splice(e,1);for(e in this.wpgmp_polygons)this.wpgmp_polygons[e]==this.selectedShape&&this.wpgmp_polygons.splice(e,1);for(e in this.wpgmp_polylines)this.wpgmp_polylines[e]==this.selectedShape&&this.wpgmp_polylines.splice(e,1);this.selectedShape.setMap(null)}},add_tab:function(e,t){var a=[];a.title=e,a.content=t,this.tabs.push(a)},show_tabs:function(){if(!(0===this.tabs.length||this.map_data.listing&&1==this.map_data.listing.hide_map)){var e='<div class="wpgmp_tabs_container cleanslate"><ul class="wpgmp_tabs clearfix">';return $.each(this.tabs,function(t,a){e+=0==t?'<li class="wpgmp-tab-'+t+'" rel="'+t+'"><a class="active" href="javascript:void(0);">'+a.title+"</a></li>":'<li class="wpgmp-tab-'+t+'" rel="'+t+'"><a href="javascript:void(0);">'+a.title+"</a></li>"}),e+="</ul>",e+='<div class="wpgmp_toggle_main_container">',$.each(this.tabs,function(t,a){e+='<div id="wpgmp_tab_'+t+'">',e+=a.content,e+="</div>"}),e+='</div><div class="wpgmp_toggle_container">'+wpgmp_local.hide+"</div></div>"}},map_widgets:function(){var e="";this.map_data.map_tabs.category_tab&&!0===this.map_data.map_tabs.category_tab.cat_tab&&this.widget_category(),this.map_data.map_tabs.direction_tab&&!0===this.map_data.map_tabs.direction_tab.dir_tab&&this.widget_directions(),this.map_data.map_tabs.nearby_tab&&!0===this.map_data.map_tabs.nearby_tab.near_tab&&this.widget_nearby(),this.map_data.map_tabs.route_tab&&!0===this.map_data.map_tabs.route_tab.display_route_tab&&this.widget_route_tab(),this.map_data.map_tabs.extension_tabs&&this.widget_extensions_tab(),"undefined"!=(e+=this.show_tabs())&&$(this.container).find(".wpgmp_map_parent").append(e)},widget_extensions_tab:function(){var e=this,t=e.map_data.map_tabs.extension_tabs;void 0!==t&&t.length>0&&$.each(t,function(t,a){e.add_tab(a.title,a.content)})},widget_route_tab:function(){var e=this.map_data.map_tabs.route_tab.route_tab_data,t="";!0===this.map_data.map_tabs.route_tab.display_route_tab_data&&(t+='<div id="wpgmp_route_tab">',e&&$.each(e,function(e,a){t+='<div class="wpgmp_tab_item">',t+='<input type="checkbox" class="wpgmp_specific_route_item" value="'+a.route_id+'">';var o='<span style="display:inline-block;width:10px;height:10px;background-color:'+a.route_stroke_color+';float:right;margin-right:10px;margin-top:5px;"></span>';t+='<a href="javascript:void(0);" class="wpgmp_cat_title wpgmp-accordion accordion-close">'+a.route_title+o+"</a>",t+='<div class="directions-panel-route'+a.route_id+' wpgmp-directions-panel-route-style" style="overflow-y:scroll; height:200px;"></div>',t+="</div>"}),t+="</div>"),this.add_tab(this.map_data.map_tabs.route_tab.route_tab_title,t)},widget_nearby:function(){var e='<div class="wpgmp_nearby_container">';if(e+='<p><input  placeholder="'+wpgmp_local.start_point+'" type="text" name="start_point" class="input start_point wpgmp_auto_suggest" autocomplete="off" /><span class="wpgmp_mcurrent_loction" title="'+wpgmp_local.take_current_location+'">&nbsp;</span></p>',e+='<p><input name="wpgmp_radius" placeholder="'+wpgmp_local.radius+'" type="text" class="input" value="25" size="8"> <select name="wpgmp_route_dimension"><option value="miles">'+wpgmp_local.miles+'</option><option value="km">'+wpgmp_local.km+"</option></select></p>",void 0!==this.map_data.map_tabs.nearby_tab.nearby_amenities){var t=this.map_data.map_tabs.nearby_tab.nearby_amenities;t&&(e+='<div class="choose_amenities">',$.each(t,function(t,a){e+="<span class='amenity_type'><input type='checkbox' value='"+a+"' name='wpgmp_place_types[]' /><label>"+a+"</label></span>"}))}e+="</div>",e+='<p style="clear:both;"><input type="submit" value="'+wpgmp_local.find_location+'" class="wpgmp_find_nearby_button" /></p><div class="location_panel"></div></div>',this.add_tab(this.map_data.map_tabs.nearby_tab.nearby_tab_title,e)},widget_directions:function(){var e="";if(e='<div class="wpgmp_direction_container">',"textbox"==this.map_data.map_tabs.route_start_location){var t="";t=this.map_data.map_tabs.direction_tab.default_start_location==undefined?"":this.map_data.map_tabs.direction_tab.default_start_location,e+='<p><input value="'+t+'" placeholder="'+wpgmp_local.start_location+'" type="text" name="start_point" class="input start_point wpgmp_auto_suggest" autocomplete="off" /><span class="wpgmp_mcurrent_loction" title="'+wpgmp_local.take_current_location+'">&nbsp;</span></p>'}else"selectbox"==this.map_data.map_tabs.route_start_location&&(e+='<p><select name="start_point" class="input start_point" autocomplete="off" >',e+='<option value="">'+wpgmp_local.start_location+"</option>",this.places!==undefined&&(this.places.sort(this.sortByTitle),$.each(this.places,function(t,a){e+='<option value="'+a.address+'">'+a.title+"</option>"})),e+="</select>");if("textbox"==this.map_data.map_tabs.route_end_location){var a="";a=this.map_data.map_tabs.direction_tab.default_end_location==undefined?"":this.map_data.map_tabs.direction_tab.default_end_location,e+='<p><input value="'+a+'" placeholder="'+wpgmp_local.end_location+'" name="end_point" type="text" class="input end_point wpgmp_auto_suggest" autocomplete="off" /></p>'}else"selectbox"==this.map_data.map_tabs.route_end_location&&(e+='<p><select name="end_point" class="input end_point" autocomplete="off" >',e+='<option value="">'+wpgmp_local.end_location+"</option>",this.places!==undefined&&(this.places.sort(this.sortByTitle),$.each(this.places,function(t,a){e+='<option value="'+a.address+'">'+a.title+"</option>"})),e+="</select>");e+='<p><select name="travel_mode" id="travaling_mode"> <option value="DRIVING" selected="selected">'+wpgmp_local.driving+'</option> <option value="BICYCLING">'+wpgmp_local.bicycling+'</option> <option value="WALKING">'+wpgmp_local.walking+'</option> <option value="TRANSIT">'+wpgmp_local.transit+"</option> </select></p>",e+='<p><select name="travel_unit" id="travel_unit"> <option value="metric" selected="selected">'+wpgmp_local.metric+'</option> <option value="imperial">'+wpgmp_local.imperial+'</option></select></p><p><input type="submit" value="'+wpgmp_local.find_direction+'" class="wpgmp_find_direction"></p><div class="directions-panel" style="overflow-y:scroll;display:none;"></div></div>',this.add_tab(this.map_data.map_tabs.direction_tab.direction_tab_title,e)},widget_category:function(){var e=this;if(!0===e.map_data.map_tabs.category_tab.select_all)var t='<div class="wpgmp-select-all"><input checked="checked" type="checkbox" value="true" name="wpgmp_select_all">&nbsp&nbsp'+wpgmp_local.select_all+"</div>";else t="";var a={},o={};void 0!==e.map_data.places&&(e.map_data.places_for_category_tabs=e.map_data.places,e.map_data.places_for_category_tabs=e.sorting_inside_tabs(e.map_data.places_for_category_tabs,e.map_data.map_tabs.category_tab.cat_post_order),$.each(e.map_data.places_for_category_tabs,function(t,i){void 0!==i.categories&&$.each(i.categories,function(t,n){var s,r=!0;if((s=e.search_category(e.map_data.map_tabs.category_tab.child_cats,n.id,[],a,o)).length>0&&(r=!1),void 0!==n.type&&"category"==n.type&&n.name&&1==r){void 0===a[n.id]&&(a[n.id]={},a[n.id].data=[]),a[n.id].cat_id=n.id,a[n.id].cat_title=n.name,a[n.id].cat_marker_icon=n.icon,n.extension_fields&&n.extension_fields.cat_order&&(a[n.id].cat_order=n.extension_fields.cat_order);var p="";i.location.redirect_permalink&&(p=i.location.redirect_permalink);var _="";i.location.redirect_custom_link&&(_=i.location.redirect_custom_link),a[n.id].data.push({cat_location_id:i.id,cat_location_title:i.title,cat_location_address:i.address,cat_location_zoom:i.location.zoom,onclick_action:i.location.onclick_action,redirect_permalink:p,redirect_custom_link:_})}else if(void 0!==n.type&&"category"==n.type&&n.name&&0==r){void 0===o[n.id]&&(o[n.id]={},o[n.id].data=[],o[n.id].parent_cat=s),o[n.id].cat_id=n.id,o[n.id].cat_title=n.name,o[n.id].cat_marker_icon=n.icon,n.extension_fields&&n.extension_fields.cat_order&&(o[n.id].cat_order=n.extension_fields.cat_order);p="";i.location.redirect_permalink&&(p=i.location.redirect_permalink);_="";i.location.redirect_custom_link&&(_=i.location.redirect_custom_link),o[n.id].data.push({cat_location_id:i.id,cat_location_title:i.title,cat_location_address:i.address,cat_location_zoom:i.location.zoom,onclick_action:i.location.onclick_action,redirect_permalink:p,redirect_custom_link:_}),a[s]!==undefined&&(void 0===a[s].child_cats&&(a[s].child_cats=[]),a[s].child_cats[n.id]=n.id)}})}));var i=[];void 0!==a&&$.each(a,function(t,a){var n=a.data.length;void 0!==o&&$.each(o,function(e,t){t.parent_cat==a.cat_id&&(n+=t.data.length,$.each(o,function(e,a){a.parent_cat==t.cat_id&&(n+=a.data.length)}))}),a.loc_count=n,"count"==e.map_data.map_tabs.category_tab.cat_order_by?i.push(a.loc_count):"category"==e.map_data.map_tabs.category_tab.cat_order_by?a.cat_order?i.push(a.cat_order):!a.cat_order&&e.map_data.map_tabs.category_tab.all_cats[a.cat_id]&&e.map_data.map_tabs.category_tab.all_cats[a.cat_id].extensions_fields&&(a.cat_order=e.map_data.map_tabs.category_tab.all_cats[a.cat_id].extensions_fields.cat_order,i.push(a.cat_order)):a.cat_title?i.push(a.cat_title):!a.cat_title&&e.map_data.map_tabs.category_tab.all_cats[a.cat_id]&&(a.cat_title=e.map_data.map_tabs.category_tab.all_cats[a.cat_id].group_map_title,i.push(a.cat_title))}),"category"==e.map_data.map_tabs.category_tab.cat_order_by?i.sort(function(e,t){return e-t}):"count"==e.map_data.map_tabs.category_tab.cat_order_by?i.sort(function(e,t){return t-e}):i.sort();var n=[],s=[];$.each(i,function(t,o){$.each(a,function(t,a){var i;i="count"==e.map_data.map_tabs.category_tab.cat_order_by?a.loc_count:"category"==e.map_data.map_tabs.category_tab.cat_order_by?a.cat_order:a.cat_title,o==i&&-1==$.inArray(a.cat_id,s)&&(n.push(a),s.push(a.cat_id))})}),void 0!==n&&$.each(n,function(a,i){var n="";if(!i.cat_title&&e.map_data.map_tabs.category_tab.all_cats[i.cat_id]&&(i.cat_title=e.map_data.map_tabs.category_tab.all_cats[i.cat_id].group_map_title),!i.cat_marker_icon&&e.map_data.map_tabs.category_tab.all_cats[i.cat_id]&&(i.cat_marker_icon=e.map_data.map_tabs.category_tab.all_cats[i.cat_id].group_marker),void 0!==i.cat_marker_icon&&(n='<span class="arrow"><img src="'+i.cat_marker_icon+'"></span>'),t+='<div class="wpgmp_tab_item" data-container="wpgmp-category-tab-item">',i.child_cats!==undefined){i.child_cats=i.child_cats.filter(function(e){return""!==e});var s=' data-child-cats="'+i.child_cats.join(",")+'"'}else s="";t+='<input type="checkbox"'+s+' data-marker-category="'+i.cat_id+'" value="'+i.cat_id+'">';var r=i.loc_count;$.each(e.map_data.map_tabs.category_tab.child_cats,function(e,t){t==i.cat_id&&0==r&&(r="")});var p="";if(!0===e.map_data.map_tabs.category_tab.show_count&&""!=r&&(p=" ("+r+")"),t+='<a href="javascript:void(0);" class="wpgmp_cat_title wpgmp-accordion accordion-close">'+i.cat_title+p+n+"</a>",!0!==e.map_data.map_tabs.category_tab.hide_location&&(t+='<div class="scroll-pane" style="max-height:300px;width:100%;">',t+='<ul class="wpgmp_location_container">',$.each(i.data,function(e,a){"marker"==a.onclick_action?t+='<li><input type="checkbox" data-marker-location="'+a.cat_location_id+'"  value="'+a.cat_location_id+'" /><a data-marker="'+a.cat_location_id+'" data-zoom="'+a.cat_location_zoom+'" href="javascript:void(0);">'+a.cat_location_title+"</a></li>":"post"==a.onclick_action?t+='<li><input type="checkbox" data-marker-location="'+a.cat_location_id+'"  value="'+a.cat_location_id+'" /><a href="'+a.redirect_permalink+'" target="_blank">'+a.cat_location_title+"</a></li>":"custom_link"==a.onclick_action&&(t+='<li><input type="checkbox" data-marker-location="'+a.cat_location_id+'"  value="'+a.cat_location_id+'" /><a href="'+a.redirect_custom_link+'" target="_blank">'+a.cat_location_title+"</a></li>")}),t+="</ul>",t+="</div>"),t+="</div>",void 0!==o){t+=e.display_sub_categories(o,i.cat_id,"",20)}}),e.add_tab(e.map_data.map_tabs.category_tab.cat_tab_title,t)},search_category:function(e,t,a,o,i){var n=this,s=!0;return $.each(e,function(e,r){e==t&&(a=r,s=!1,void 0===i[t]&&(i[t]={},i[t].data=[],i[t].parent_cat=r,i[t].cat_id=t,$.each(n.categories,function(e,a){a.group_map_id==t&&(i[t].cat_title=a.group_map_title,i[t].cat_marker_icon=a.group_marker)})),a=n.search_category(n.map_data.map_tabs.category_tab.child_cats,r,a,o,i))}),1==s&&void 0===o[t]&&(o[t]={},o[t].data=[],o[t].cat_id=t,$.each(n.categories,function(e,a){a.group_map_id==t&&(o[t].cat_title=a.group_map_title,o[t].cat_marker_icon=a.group_marker)})),a},display_sub_categories:function(e,t,a,o){var i=this,n=[];void 0!==e&&$.each(e,function(t,a){var o=a.data.length;void 0!==e&&$.each(e,function(t,i){i.parent_cat==a.cat_id&&(o+=i.data.length,$.each(e,function(e,t){t.parent_cat==i.cat_id&&(o+=t.data.length)}))}),a.loc_count=o,"count"==i.map_data.map_tabs.category_tab.cat_order_by?n.push(a.loc_count):"category"==i.map_data.map_tabs.category_tab.cat_order_by?a.cat_order?n.push(a.cat_order):!a.cat_order&&i.map_data.map_tabs.category_tab.all_cats[a.cat_id]&&(a.cat_order=i.map_data.map_tabs.category_tab.all_cats[a.cat_id].extensions_fields.cat_order,n.push(a.cat_order)):a.cat_title?n.push(a.cat_title):!a.cat_title&&i.map_data.map_tabs.category_tab.all_cats[a.cat_id]&&(a.cat_title=i.map_data.map_tabs.category_tab.all_cats[a.cat_id].group_map_title,n.push(a.cat_title))}),"category"==i.map_data.map_tabs.category_tab.cat_order_by?n.sort(function(e,t){return e-t}):"count"==i.map_data.map_tabs.category_tab.cat_order_by?n.sort(function(e,t){return t-e}):n.sort();var s=[],r=[];return $.each(n,function(t,a){$.each(e,function(e,t){var o;o="count"==i.map_data.map_tabs.category_tab.cat_order_by?t.loc_count:"category"==i.map_data.map_tabs.category_tab.cat_order_by?t.cat_order:t.cat_title,a==o&&-1==$.inArray(t.cat_id,r)&&(s.push(t),r.push(t.cat_id))})}),$.each(s,function(n,s){if(s.parent_cat==t){var r="";if(!s.cat_title&&i.map_data.map_tabs.category_tab.all_cats[s.cat_id]&&(s.cat_title=i.map_data.map_tabs.category_tab.all_cats[s.cat_id].group_map_title),!s.cat_marker_icon&&i.map_data.map_tabs.category_tab.all_cats[s.cat_id]&&(s.cat_marker_icon=i.map_data.map_tabs.category_tab.all_cats[s.cat_id].group_marker),void 0!==s.cat_marker_icon&&(r='<span class="arrow"><img src="'+s.cat_marker_icon+'"></span>'),a+='<div class="wpgmp_tab_item" data-container="wpgmp-category-tab-item" style="padding-left:'+o+'px;">',i.map_data.map_tabs.category_tab.parent_cats!==undefined&&i.map_data.map_tabs.category_tab.parent_cats[s.cat_id])var p=' data-child-cats="'+i.map_data.map_tabs.category_tab.parent_cats[s.cat_id].join(",")+'"';else p="";a+='<input type="checkbox"'+p+' data-parent-cat="'+t+'" data-marker-category="'+s.cat_id+'" value="'+s.cat_id+'">';var _=s.loc_count;$.each(i.map_data.map_tabs.category_tab.child_cats,function(e,t){t==s.cat_id&&0==_&&(_="")});var c="";c=!0===i.map_data.map_tabs.category_tab.show_count&&""!=_?" ("+_+")":"",a+='<a href="javascript:void(0);" class="wpgmp_cat_title wpgmp-accordion accordion-close">'+s.cat_title+c+r+"</a>",!0!==i.map_data.map_tabs.category_tab.hide_location&&(a+='<div class="scroll-pane" style="height: 97px; width:100%;">',a+='<ul class="wpgmp_location_container">',$.each(s.data,function(e,t){"marker"==t.onclick_action?a+='<li><input type="checkbox" data-marker-location="'+t.cat_location_id+'"  value="'+t.cat_location_id+'" /><a data-marker="'+t.cat_location_id+'" data-zoom="'+t.cat_location_zoom+'" href="javascript:void(0);">'+t.cat_location_title+"</a></li>":"post"==t.onclick_action?a+='<li><input type="checkbox" data-marker-location="'+t.cat_location_id+'"  value="'+t.cat_location_id+'" /><a href="'+t.redirect_permalink+'" target="_blank">'+t.cat_location_title+"</a></li>":"custom_link"==t.onclick_action&&(a+='<li><input type="checkbox" data-marker-location="'+t.cat_location_id+'"  value="'+t.cat_location_id+'" /><a href="'+t.redirect_custom_link+'" target="_blank">'+t.cat_location_title+"</a></li>")}),a+="</ul>",a+="</div>"),a+="</div>",a+=i.display_sub_categories(e,s.cat_id,"",o+20)}else if(n+1==e.length)return}),a},sorting_inside_tabs:function(e,t){return"asc"==t&&e.sort(),"desc"==t&&(e.sort(),e.reverse()),e},sorting:function(e,t,a){switch(e){case"category":this.places.sort(this.sortByCategory),this.show_places.sort(this.sortByCategory),"desc"==t&&(this.places.reverse(),this.show_places.reverse());break;case"title":this.map_data.places!==undefined&&this.map_data.places.sort(this.sortByTitle),this.show_places!==undefined&&this.show_places.sort(this.sortByTitle),"desc"==t&&(this.map_data.places.reverse(),this.places.reverse(),this.show_places.reverse());break;case"address":this.map_data.places.sort(this.sortByAddress),this.show_places.sort(this.sortByAddress),"desc"==t&&(this.places.reverse(),this.show_places.reverse());break;default:var o=this.map_data.places[0];void 0!==o[e]?(this.map_data.places.sort(this.sortByPlace(e,a)),this.show_places.sort(this.sortByPlace(e,a))):void 0!==o.location[e]?(this.map_data.places.sort(this.sortByLocation(e,a)),this.show_places.sort(this.sortByLocation(e,a))):void 0!==o.location.extra_fields[e]&&(this.map_data.places.sort(this.sortByExtraFields(e,a)),this.show_places.sort(this.sortByExtraFields(e,a))),"desc"==t&&(this.places.reverse(),this.show_places.reverse())}},sortByExtraFields:function(e,t){return function(a,o){if(void 0!==o.location.extra_fields[e]&&void 0!==a.location.extra_fields[e]){if(null==o.location.extra_fields[e]&&(o.location.extra_fields[e]=""),null==a.location.extra_fields[e]&&(a.location.extra_fields[e]=""),"num"==t)var i=parseInt(a.location.extra_fields[e]),n=parseInt(o.location.extra_fields[e]);else i=a.location.extra_fields[e].toLowerCase(),n=o.location.extra_fields[e].toLowerCase();return i<n?-1:i>n?1:0}}},sortByLocation:function(e,t){return function(a,o){if(o.location[e]&&a.location[e]&&a.location[e]&&o.location[e]){var i=a.location[e].toLowerCase(),n=o.location[e].toLowerCase();return"num"==t&&(i=parseInt(i),n=parseInt(n)),i<n?-1:i>n?1:0}}},sortByPlace:function(e,t){return function(a,o){if(o[e]&&a[e]&&a[e]&&o[e]){var i=a[e].toLowerCase(),n=o[e].toLowerCase();return"num"==t&&(i=parseInt(i),n=parseInt(n)),i<n?-1:i>n?1:0}}},sortByCategory:function(e,t){if(t.categories[0]&&e.categories[0]&&e.categories[0].name&&t.categories[0].name){var a=e.categories[0].name.toLowerCase(),o=t.categories[0].name.toLowerCase();return a<o?-1:a>o?1:0}},sortByTitle:function(e,t){var a=e.title.toLowerCase(),o=t.title.toLowerCase();return a<o?-1:a>o?1:0},sortByValue:function(e,t){var a=e.toLowerCase(),o=t.toLowerCase();return a<o?-1:a>o?1:0},sortByAddress:function(e,t){var a=e.address.toLowerCase(),o=t.address.toLowerCase();return a<o?-1:a>o?1:0},update_filters:function(){var e={},t=$(this.container).find('[data-filter="dropdown"]'),a=$(this.container).find('[data-filter="checklist"]:checked'),o=$(this.container).find('[data-filter="list"].fc_selected');$.each(t,function(t,a){""!=$(this).val()&&(void 0===e[$(this).data("name")]&&(e[$(this).data("name")]=[]),e[$(this).data("name")].push($(this).val()))}),$.each(a,function(t,a){void 0===e[$(this).data("name")]&&(e[$(this).data("name")]=[]),e[$(this).data("name")].push($(this).val())}),$.each(o,function(t,a){void 0===e[$(this).data("name")]&&(e[$(this).data("name")]=[]),e[$(this).data("name")].push($(this).data("value").toString())}),this.apply_filters(e)},apply_url_filters:function(){var e=this,t=location.search.substring(1),a=$.parseParams(t||"");$.isEmptyObject(a)||(e.url_filters=a,$.each(a,function(t,a){"search"==t&&$(e.container).find('[data-input="wpgmp-search-text"]').val(a)}),e.apply_filters({}))},apply_filters:function(e){var t=this,a=!0;t.show_places=[];var o=!1;if($(t.container).find('[data-input="wpgmp-search-text"]').length>0){var i=$(t.container).find('[data-input="wpgmp-search-text"]').val();(i=i.toLowerCase()).length>0&&(o=!0)}if(t.map_data.map_tabs&&t.map_data.map_tabs.category_tab&&!0===t.map_data.map_tabs.category_tab.cat_tab||$(t.container).find("input[data-marker-category]").length>0){var n=$(t.container).find("input[data-marker-category]:checked"),s=[],r=[];n.length>0&&$.each(n,function(e,t){s.push($(t).data("marker-category"));var a=$(t).closest('[data-container="wpgmp-category-tab-item"]').find("input[data-marker-location]:not(:checked)");a.length>0&&$.each(a,function(e,t){r.push($(t).data("marker-location"))})});var p=$(t.container).find('[data-container="wpgmp-category-tab-item"]').find("input[data-marker-location]:checked"),_=[];p.length>0&&$.each(p,function(e,t){_.push($(t).data("marker-location"))})}if(void 0!==t.map_data.places&&$.each(t.map_data.places,function(n,p){if(a=!0,void 0!==e&&$.each(e,function(e,t){var o=!1;if($.isArray(t)){if(void 0!==p.categories&&"category"==e&&$.each(p.categories,function(e,a){$.inArray(a.id,t)>-1&&(o=!0)}),void 0!==p.custom_filters&&$.each(p.custom_filters,function(a,i){e==a&&(o=!1,$.isArray(i)?$.each(i,function(e,a){$.inArray(a,t)>-1&&(o=!0)}):i==t.val&&(o=!0))}),void 0!==p[e])$.inArray(p[e],t)>-1&&(o=!0);else if(void 0!==p.location[e])$.inArray(p.location[e],t)>-1&&(o=!0);else if(p.location.extra_fields&&void 0!==p.location.extra_fields[e]){var i=t[0];p.location.extra_fields[e]&&p.location.extra_fields[e].indexOf(i)>-1?o=!0:$.inArray(p.location.extra_fields[e],t)>-1&&(o=!0)}0==o&&(a=!1)}else t.val=""}),!0===o&&!0===a&&(a=p.title!=undefined&&p.title.toLowerCase().indexOf(i)>=0||(p.content!=undefined&&p.content.toLowerCase().indexOf(i)>=0||(String(p.location.lat).toLowerCase().indexOf(i)>=0||(String(p.location.lng).toLowerCase().indexOf(i)>=0||(!!(p.address&&p.address.toString().toLowerCase().indexOf(i)>=0)||(!!(p.location.state&&p.location.state.toLowerCase().indexOf(i)>=0)||(!!(p.location.country&&p.location.country.toLowerCase().indexOf(i)>=0)||(!!(p.location.postal_code&&String(p.location.postal_code).toLowerCase().indexOf(i)>=0)||(!!(p.location.city&&p.location.city.toLowerCase().indexOf(i)>=0)||void 0!==t.search_area&&""!=t.search_area&&!0===t.wpgmp_within_radius(p,t.search_area))))))))),void 0!==p.location.extra_fields&&$.each(p.location.extra_fields,function(e,t){t&&(t=t.toString())&&t.toLowerCase().indexOf(i)>=0&&(a=!0)})),(p.categories.length==undefined||"undefined"==p.categories.length)&&s&&s.length>0&&0==$(t.container).find('input[name="wpgmp_select_all"]').is(":checked")&&a&&(a=!1),s&&0!=a&&p.categories.length!=undefined){var c=!1;0===s.length?void 0!==p.categories&&$.each(p.categories,function(e,t){""===t.id&&(c=!0)}):void 0!==p.categories&&$.each(p.categories,function(e,t){""===t.id?c=!0:$.inArray(parseInt(t.id),s)>-1&&(c=!0,p.marker.setIcon(t.icon))}),0!==r.length&&$.inArray(parseInt(p.id),r)>-1&&(c=!1),a=!1!==c,0!==_.length&&$.inArray(parseInt(p.id),_)>-1&&(a=!0)}p.marker.visible=a,p.marker.setVisible(a),0==a&&p.infowindow.close(),p.marker.setAnimation(null),!0===a&&t.show_places.push(p)}),typeof t.map_data.map_options.bound_map_after_filter!=typeof undefined&&!0===t.map_data.map_options.bound_map_after_filter){for(var c=new google.maps.LatLngBounds,l=0;l<t.show_places.length;l++){var m=new google.maps.LatLng(t.show_places[l].location.lat,t.show_places[l].location.lng);c.extend(m)}t.map.fitBounds(c)}if(t.map_data.listing){if($(t.container).find('[data-filter="map-sorting"]').val()){var d=$(t.container).find('[data-filter="map-sorting"]').val().split("__"),g="";""!==d[0]&&""!==d[1]&&(void 0!==d[2]&&(g=d[2]),t.sorting(d[0],d[1],g))}else if(t.map_data.listing.default_sorting){g="";"listorder"==t.map_data.listing.default_sorting.orderby&&(g="num"),t.sorting(t.map_data.listing.default_sorting.orderby,t.map_data.listing.default_sorting.inorder,g)}t.update_places_listing()}t.map_data.marker_cluster&&t.set_marker_cluster()},create_perpage_option:function(){var e="";return e+='<select name="map_perpage_location_sorting" data-filter="map-perpage-location-sorting" class="choose_salutation">',e+='<option value="'+this.map_data.listing.pagination.listing_per_page+'">'+wpgmp_local.show_locations+"</option>",e+='<option value="25">25</option>',e+='<option value="50">50</option>',e+='<option value="100">100</option>',e+='<option value="200">200</option>',e+='<option value="500">500</option>',e+='<option value="'+this.show_places.length+'">'+wpgmp_local.all_location+"</option>",e+="</select>"},create_sorting:function(){var e="";return!0===this.map_data.listing.display_sorting_filter&&(e+='<select name="map_sorting" data-filter="map-sorting"><option value="">'+wpgmp_local.sort_by+"</option>",$.each(this.map_data.listing.sorting_options,function(t,a){e+="<option value='"+t+"'>"+a+"</option>"}),e+="</select>"),e},create_radius:function(){var e="";if(!0===this.map_data.listing.display_radius_filter){var t=this.map_data.listing.radius_options;if(t!=undefined){e+='<select data-name="radius" name="map_radius"><option value="">'+wpgmp_local.select_radius+"</option>";var a=this.map_data.listing.radius_dimension;$.each(t.split(","),function(t,o){e+="miles"==a?"<option value='"+o+"'>"+o+" "+wpgmp_local.miles+"</option>":"<option value='"+o+"'>"+o+" "+wpgmp_local.km+"</option>"}),e+="</select>"}}return e},sort_numeric_value_filters:function(e){return e.some(isNaN)||e.sort(function(e,t){return e-t}),e},custom_filters:function(){var e=this,t=this.map_data.places,a=this.map_data.filters;void 0!==a&&void 0!==a.custom_filters&&0!=a.custom_filters.length&&$.each(a.custom_filters,function(o,i){var n="",s={};$.each(i,function(o,i){$.each(i,function(e,o){$.each(t,function(t,o){if("category"==e)void 0===o.categories&&(o.categories={}),$.each(o.categories,function(e,t){void 0===s[t.type]&&(s[t.type]={}),t.name&&(s[t.type][t.name]=t.id)});else{if(void 0!==o[e]&&(void 0===s[e]&&(s[e]={}),o[e]&&(s[e][o[e]]=o[e])),void 0!==o.location.extra_fields[e]&&(void 0===s[e]&&(s[e]={}),o.location.extra_fields[e]&&(s[e][o.location.extra_fields[e]]=o.location.extra_fields[e])),void 0!==o.location[e]&&(void 0===s[e]&&(s[e]={}),o.location[e]&&(s[e][o.location[e]]=o.location[e])),void 0!==o.custom_filters&&void 0!==o.custom_filters[e]&&(void 0===s[e]&&(s[e]={}),o.custom_filters[e])){var i=o.custom_filters[e];$.isArray(i)?$.each(i,function(t,a){s[e][a]=a}):s[e][i]=i}if("radius"==e){void 0===s[e]&&(s[e]={});var n=a.radius_options,r=a.radius_dimension;$.each(n.split(","),function(t,a){"miles"==r?s[e][a+" "+wpgmp_local.miles]=a:s[e][a+" "+wpgmp_local.km]=a})}}})}),"dropdown"==o&&void 0!==s&&$.each(s,function(t,a){a=e.sort_object_by_value(a),a=e.sort_object_by_unique_values(a),a=e.sort_numeric_value_filters(a),n+='<select data-filter="dropdown"  name="place_'+t+'" data-name = "'+t+'">',n+='<option value="">'+(i[t]?i[t]:"Select "+t)+"</option>",$.each(a,function(e,t){var a=t;""!=(t=(t=t.replace("'","&#39;")).replace('"',"&#34;"))&&null!=t&&(n+="<option value='"+t+"'>"+a+"</option>")}),n+="</select>"}),"checklist"==o&&void 0!==s&&$.each(s,function(e,t){n+='<div class="wpgmp_filters_checklist">',n+='<label  data-filter = "place_'+e+'" >'+(a.custom_filters[e]?a.custom_filters[e]:"Select "+e)+"</label>",$.each(t,function(t,a){""!=a&&null!=a&&(n+="<input data-filter='checklist' type='checkbox' data-name = '"+e+"' value='"+a+"'>"+t)}),n+="</div>"}),"list"==o&&void 0!==s&&$.each(s,function(e,t){n+='<div class="wpgmp_filters_list">',n+='<label  data-filter = "place_'+e+'" >'+(a.custom_filters[e]?a.custom_filters[e]:"Select "+e)+"</label><ul>",$.each(t,function(t,a){""!=a&&null!=a&&(n+="<li data-filter='list' data-name = '"+e+"' data-value='"+a+"'>"+t+"</li>")}),n+="</ul></div>"})}),$("body").find(a.filters_container).append(n)})},sort_object_by_keyvalue:function(e,t,a,o){var i=[];for(var n in e)i.push(e[n]);return i.sort(this.sortByPlace(t,a)),"desc"==o&&i.reverse(),i},sort_object_by_unique_values:function(e){var t=[];for(var a in e)e[a].indexOf(",")>-1?e[a].split(/\s*,\s*/).forEach(function(e){t.push(e.trim())}):t.push(e[a].trim());return t.filter(function(e,a){return t.indexOf(e)==a}).sort()},sort_object_by_value:function(e){var t=[];for(var a in e)t.push(a);t.sort(this.sortByValue);for(var o={},i=0;i<t.length;i++)o[t[i]]=e[t[i]];return o},create_filters:function(){var e=this,t={},a=this.map_data.places,o=this.map_data.listing,i=o.display_taxonomies_all_filter;$.each(a,function(e,a){void 0===a.categories&&(a.categories={}),$.each(a.categories,function(e,a){void 0===t[a.type]&&(t[a.type]={}),a.name&&(a.extension_fields&&a.extension_fields.cat_order?t[a.type][a.name]={id:a.id,order:a.extension_fields.cat_order,name:a.name}:t[a.type][a.name]={id:a.id,order:0,name:a.name})})});var n="",s="name",r="",p="asc";return e.map_data.listing&&e.map_data.listing.default_sorting&&("listorder"==e.map_data.listing.default_sorting.orderby&&(s="order",r="num",p=e.map_data.listing.default_sorting.inorder),p=e.map_data.listing.default_sorting.inorder),$.each(t,function(t,a){if(!0===o.display_category_filter&&"category"==t)n+='<select data-filter="dropdown" data-name="category" name="place_'+t+'">',n+='<option value="">'+wpgmp_local.select_category+"</option>",a=e.sort_object_by_keyvalue(a,s,r,p),$.each(a,function(e,t){n+="<option value='"+t.id+"'>"+t.name+"</option>"}),n+="</select>";else if(!0===o.display_taxonomies_filter){if(null===i)return!1;i.indexOf(t)>-1&&(n+='<select data-filter="dropdown" data-name="category" name="place_'+t+'">',n+='<option value="">Select '+t+"</option>",$.each(a,function(e,t){n+="<option value='"+t+"'>"+e+"</option>"}),n+="</select>")}}),n},update_places_listing:function(){this.per_page_value>0?this.per_page_value=this.per_page_value:this.per_page_value=this.map_data.listing.pagination.listing_per_page,$(this.container).find(".location_pagination"+this.map_data.map_property.map_id).pagination(this.show_places.length,{callback:this.display_places_listing,map_data:this,items_per_page:this.per_page_value,prev_text:wpgmp_local.prev,next_text:wpgmp_local.next})},display_filters_listing:function(){if(this.map_data.listing){var e=this.map_data.listing.hide_locations,t=this.map_data.listing.list_grid;if(1!=e){var a='<div class="wpgmp_listing_container">';a+="<div class='wpgmp_categories wpgmp_print_listing "+t+"' data-container='wpgmp-listing-"+$(this.element).attr("id")+"'></div>",a+="</div>",$(this.map_data.listing.listing_container).html(a)}this.filter_position=this.map_data.listing.filters_position,this.filter_content=this.display_filters(),$(this.container).find(".wpgmp_filter_wrappers").length>0&&$(this.container).find(".wpgmp_filter_wrappers").html(this.filter_content)}},display_filters:function(){var e=this.map_data.listing.hide_locations,t="";if(this.map_data.listing.listing_header!=undefined&&(t+='<div class="wpgmp_before_listing">'+this.map_data.listing.listing_header+"</div>"),!0===this.map_data.listing.display_search_form){var a="";!0===this.map_data.listing.search_field_autosuggest&&(a="wpgmp_auto_suggest"),t+='<div class="wpgmp_listing_header"><div class="wpgmp_search_form"><input type="text" rel="24" data-input="wpgmp-search-text" name="wpgmp_search_input" class="wpgmp_search_input '+a+'" placeholder="'+wpgmp_local.search_placeholder+'"></div></div>'}return t+='<div class="categories_filter">'+this.create_filters()+'<div data-container="wpgmp-filters-container"></div>',1!=e&&(t+=this.create_sorting()+""),1!=e&&!0===this.map_data.listing.display_location_per_page_filter&&(t+=" "+this.create_perpage_option()+" "),t+=" "+this.create_radius()+" ",1!=e&&!0===this.map_data.listing.display_print_option&&(t+=" "+wpgmp_local.img_print),1!=e&&!0===this.map_data.listing.display_grid_option&&(t+=" "+wpgmp_local.img_grid+wpgmp_local.img_list),void 0!==this.map_data.map_options.display_reset_button&&!0===this.map_data.map_options.display_reset_button&&(t+='<div class="categories_filter_reset"><input type="button" class="categories_filter_reset_btn" name="categories_filter_reset_btn" value="'+this.map_data.map_options.map_reset_button_text+'"></div>'),t+="</div>"},find_direction:function(options){var map_obj=this,request={origin:options.start,destination:options.end,optimizeWaypoints:!0,travelMode:eval("google.maps.TravelMode."+options.mode),unitSystem:eval("google.maps.UnitSystem."+options.unit)};map_obj.directionsService=new google.maps.DirectionsService,map_obj.directionsService.route(request,function(e,t){t==google.maps.DirectionsStatus.OK&&(map_obj.directionsDisplay.setMap(map_obj.map),map_obj.directionsDisplay.setDirections(e),0!=map_obj.map_data.map_tabs.direction_tab.suppress_markers&&map_obj.map_data.map_tabs.direction_tab.suppress_markers!=undefined||(map_obj.directionsDisplay.setPanel(options.direction_panel),$(options.direction_panel).css("display","block")))})},display_places_listing:function(e,t){var a="",o=$('select[name = "place_category"]'),i=10;i=this.items_per_page?this.items_per_page:this.map_data.map_data.listing.pagination.listing_per_page;var n=this.map_data.show_places,s=this.map_data.map_data.listing.listing_container,r=this.map_data.map_data.listing.listing_placeholder,p=Math.min((e+1)*i,n.length),_="",c="";if(p>0)for(var l=e*i;l<p;l++){var m=n[l],d=r;if(!0===m.marker.visible){m.id&&("marker"==m.location.onclick_action?(_='<a href="javascript:void(0);" class="place_title" data-zoom="'+m.location.zoom+'"  data-marker="'+m.id+'" >'+m.title+"</a>",c='href="javascript:void(0);" data-zoom="'+m.location.zoom+'"  data-marker="'+m.id+'"'):"post"==m.location.onclick_action?(_='<a href="'+m.location.redirect_permalink+'" target="_blank">'+m.title+"</a>",c='href="'+m.location.redirect_permalink+'" target="_blank"'):"custom_link"==m.location.onclick_action?(_='<a href="'+m.location.redirect_custom_link+'" target="_blank">'+m.title+"</a>",c='href="'+m.location.redirect_custom_link+'" target="_blank"'):(_='<a href="javascript:void(0);" class="place_title" data-zoom="'+m.location.zoom+'"  data-marker="'+m.id+'" >'+m.title+"</a>",c='href="javascript:void(0);" data-zoom="'+m.location.zoom+'"  data-marker="'+m.id+'"'));var g=[],u=[],h={};if(m.categories)for(var f=0;f<m.categories.length;f++)if(""!==m.categories[f].icon&&g.push("<img title='"+m.categories[f].name+"' alt='"+m.categories[f].name+"' src='"+m.categories[f].icon+"' />"),"category"==m.categories[f].type&&""!=m.categories[f].name&&u.push(m.categories[f].name),"category"!=m.categories[f].type){if(void 0===m.categories[f].name)continue;if(m.categories[f].name)var v=",";void 0===h[m.categories[f].type]&&(h[m.categories[f].type]=""),h[m.categories[f].type]+=m.categories[f].name+v}var w="";w="post"==m.source?m.location.extra_fields.post_featured_image:m.location.marker_image;var b={"{marker_id}":m.id,"{marker_title}":_,"{marker_address}":m.address,"{marker_latitude}":m.location.lat,"{marker_longitude}":m.location.lng,"{marker_city}":m.location.city,"{marker_state}":m.location.state,"{marker_country}":m.location.country,"{marker_postal_code}":m.location.postal_code,"{marker_zoom}":m.location.zoom,"{marker_icon}":g,"{marker_category}":u.join(", "),"{marker_message}":m.content,"{marker_image}":w,"{marker_featured_image}":w,"{wpgmp_listing_html}":m.listing_hook,"{onclick_action}":c};if(void 0!==m.location.extra_fields)for(var y in m.location.extra_fields)m.location.extra_fields[y]?b["{"+y+"}"]=m.location.extra_fields[y]:b["{"+y+"}"]="<div class='wpgmp_empty'>wpgmp_empty</div>";for(var k in b)b[k]!=undefined&&"undefined"!=b[k]||(b[k]="");if(h)for(var j in h)b["{"+j+"}"]=C(h[j]);var C=function(e){var t=e.lastIndexOf(",");return e.substring(0,t)};a+=d=d.replace(/{[^{}]+}/g,function(e){return e in b?b[e]:""})}}else a="<div class='wpgmp_no_locations'>"+wpgmp_local.wpgmp_location_no_results+"</div>";for(var x=0;x<n.length;x++)if(typeof(m=n[x]).categories.length!==undefined&&m.categories.length>1)if(""!==o.val()){if(m.categories)for(f=0;f<m.categories.length;f++)if(o.val()==m.categories[f].id){m.marker.setIcon(m.categories[f].icon);break}}else m.marker.setIcon(m.location.icon);a+='<div id="wpgmp_pagination"></div>',a='<div class="fc-'+this.map_data.map_data.listing.list_item_skin.type+"-"+this.map_data.map_data.listing.list_item_skin.name+' fc-wait"><div data-page="2" class="fc-component-6" data-layout="'+this.map_data.map_data.listing.list_item_skin.name+'" >'+a+"</div></div>",$(s).find(".wpgmp_categories").html(a),$(s).find(".wpgmp_extra_field:contains('wpgmp_empty')").remove(),$(s).find(".wpgmp_empty").prev().remove(),$(s).find(".wpgmp_empty").remove();try{var L=$(s).find(".wpgmp_listing_grid");if(L){var S=$(L).data("masonry");S&&S.destroy();var O=$(L).imagesLoaded(function(){O.masonry({itemSelector:".wpgmp_listing_grid .wpgmp_locations",columnWidth:".wpgmp_listing_grid .wpgmp_locations"})})}}catch(e){console.log(e)}return!1},open_infowindow:function(e){var t=this;$.each(this.map_data.places,function(a,o){if(parseInt(o.id)==parseInt(e)&&!0===o.marker.visible){var i=t.settings.infowindow_open_event;google.maps.event.trigger(o.marker,i)}})},place_info:function(e){var t;return $.each(this.places,function(a,o){parseInt(o.id)==parseInt(e)&&(t=o)}),t},create_routes:function(){var map_obj=this;this.map_data.routes&&$.each(this.map_data.routes,function(index,routeobj){var directionsService=new google.maps.DirectionsService,route_polyline={strokeColor:routeobj.route_stroke_color,strokeOpacity:routeobj.route_stroke_opacity,strokeWeight:routeobj.route_stroke_weight,clickable:routeobj.route_marker_draggable},renderer_options={draggable:routeobj.route_marker_draggable,suppressMarkers:!0,suppressInfoWindows:!0,preserveViewport:!0,polylineOptions:route_polyline},start=routeobj.start_location_data,end=routeobj.end_location_data,waypts=[];void 0!==routeobj.way_points&&$.each(routeobj.way_points,function(e,t){waypts.push({location:t,stopover:!0})});var request={origin:start,destination:end,waypoints:waypts,optimizeWaypoints:routeobj.route_optimize_waypoints,travelMode:eval("google.maps.TravelMode."+routeobj.route_travel_mode),unitSystem:eval("google.maps.UnitSystem."+routeobj.route_unit_system)};directionsService.route(request,function(e,t){if(t==google.maps.DirectionsStatus.OK){var a=new google.maps.DirectionsRenderer(renderer_options);a.setMap(map_obj.map),a.setDirections(e),a.setPanel($(".directions-panel-route"+routeobj.route_id).get(0)),void 0!==routeobj.route_id&&(map_obj.route_directions[routeobj.route_id]=a)}else console.log(""+wpgmp_local.wpgmp_route_not_avilable)})})},enable_drawing:function(){var e=this;e.drawingmanager=new google.maps.drawing.DrawingManager({drawingMode:null,drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.CIRCLE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.RECTANGLE]},circleOptions:{fillColor:"#003dce",strokeColor:"#003dce",strokeWeight:"1",strokeOpacity:"0.5",zindex:1,fillOpacity:"0.5",editable:!1,draggable:!1},polygonOptions:{fillColor:"#003dce",strokeColor:"#003dce",strokeWeight:"1",strokeOpacity:"0.5",zindex:1,fillOpacity:"0.5",editable:!1,draggable:!1},polylineOptions:{fillColor:"#003dce",strokeColor:"#003dce",strokeWeight:"1",strokeOpacity:"0.5",zindex:1,fillOpacity:"0.5",editable:!1,draggable:!1},rectangleOptions:{fillColor:"#003dce",strokeColor:"#003dce",strokeWeight:"1",strokeOpacity:"0.5",zindex:1,fillOpacity:"0.5",editable:!1,draggable:!1}}),e.drawingmanager.setMap(e.map),e.event_listener(e.drawingmanager,"circlecomplete",function(t){e.wpgmp_circles.push(t),e.wpgmp_shape_complete(t,"circle")}),e.event_listener(e.drawingmanager,"polygoncomplete",function(t){e.wpgmp_polygons.push(t),e.wpgmp_shape_complete(t,"polygon")}),e.event_listener(e.drawingmanager,"polylinecomplete",function(t){e.wpgmp_polylines.push(t),e.wpgmp_shape_complete(t,"polyline")}),e.event_listener(e.drawingmanager,"rectanglecomplete",function(t){e.wpgmp_rectangles.push(t),e.wpgmp_shape_complete(t,"rectangle")})},create_polygon:function(){var e=this;$.each(this.map_data.shapes.shape.polygons,function(t,a){var o=[];$.each(a.cordinates,function(e,t){var a=t.split(",");o.push(new google.maps.LatLng(a[0],a[1]))}),a.reference=new google.maps.Polygon({paths:o,strokeColor:a.settings.stroke_color,strokeOpacity:a.settings.stroke_opacity,strokeWeight:a.settings.stroke_weight,fillColor:a.settings.fill_color,fillOpacity:a.settings.fill_opacity}),void 0!==e.map_data.shapes&&(!0===e.map_data.shapes.drawing_editable?e.event_listener(a.reference,"click",function(){e.setSelection(a.reference),e.get_shapes_options(a.reference,"polygon")}):a.events===undefined||""===a.events.url&&""===a.events.message||e.event_listener(a.reference,"click",function(){if(""!==a.events.url&&a.events.url!==undefined||""===a.events.message)"undefined"!==a.events.url&&a.events.url!==undefined&&(window.location=a.events.url);else{var t=new google.maps.LatLngBounds;a.reference.getPath().forEach(function(e,a){t.extend(e)}),$.each(e.places,function(e,t){t.infowindow.close()}),e.opened_info.setPosition(t.getCenter()),!0===e.settings.map_infowindow_customisations?e.opened_info.setContent('<div class="wpgmp_infowindow"><div class="wpgmp_iw_content">'+a.events.message+"</div></div>"):e.opened_info.setContent(a.events.message),e.opened_info.open(e.map,this)}})),a.reference.setMap(e.map),e.wpgmp_polygons.push(a.reference),a.events==undefined&&(a.events={},a.events.url="",a.events.message=""),e.wpgmp_shape_events.push({shape:a.reference,url:a.events.url,message:a.events.message})})},create_polyline:function(){var e=this;$.each(this.map_data.shapes.shape.polylines,function(t,a){var o=[];void 0!==a.cordinates&&($.each(a.cordinates,function(e,t){var a=t.split(",");o.push(new google.maps.LatLng(a[0],a[1]))}),a.reference=new google.maps.Polyline({path:o,strokeColor:a.settings.stroke_color,strokeOpacity:a.settings.stroke_opacity,strokeWeight:a.settings.stroke_weight}),void 0!==e.map_data.shapes&&(!0===e.map_data.shapes.drawing_editable?e.event_listener(a.reference,"click",function(){e.setSelection(a.reference),e.get_shapes_options(a.reference,"polyline")}):a.events===undefined||""===a.events.url&&""===a.events.message||e.event_listener(a.reference,"click",function(){if(""!==a.events.url&&a.events.url!==undefined||""===a.events.message)""!==a.events.url&&"undefined"!==a.events.url&&a.events.url!==undefined&&(window.location=a.events.url);else{var t=new google.maps.LatLngBounds;a.reference.getPath().forEach(function(e,a){t.extend(e)}),$.each(e.places,function(e,t){t.infowindow.close()}),e.opened_info.setPosition(t.getCenter()),!0===e.settings.map_infowindow_customisations?e.opened_info.setContent('<div class="wpgmp_infowindow"><div class="wpgmp_iw_content">'+a.events.message+"</div></div>"):e.opened_info.setContent(a.events.message),e.opened_info.open(e.map,this)}}))),void 0!==a.reference&&(a.reference.setMap(e.map),e.wpgmp_polylines.push(a.reference),a.events==undefined&&(a.events={},a.events.url="",a.events.message=""),e.wpgmp_shape_events.push({shape:a.reference,url:a.events.url,message:a.events.message}))})},event_listener:function(e,t,a){google.maps.event.addListener(e,t,a)},create_circle:function(){var e=this;$.each(this.map_data.shapes.shape.circles,function(t,a){var o;$.each(a.cordinates,function(e,t){var a=t.split(",");o=new google.maps.LatLng(a[0],a[1])}),a.reference=new google.maps.Circle({fillColor:a.settings.fill_color,fillOpacity:a.settings.fill_opacity,strokeColor:a.settings.stroke_color,strokeOpacity:a.settings.stroke_opacity,strokeWeight:a.settings.stroke_weight,center:o,radius:parseInt(a.settings.radius)}),void 0!==e.map_data.shapes&&(!0===e.map_data.shapes.drawing_editable?e.event_listener(a.reference,"click",function(){e.setSelection(a.reference),e.get_shapes_options(a.reference,"circle")}):a.events===undefined||""===a.events.url&&""===a.events.message||e.event_listener(a.reference,"click",function(){""!==a.events.url&&a.events.url!==undefined||""===a.events.message?""!==a.events.url&&"undefined"!==a.events.url&&a.events.url!==undefined&&(window.location=a.events.url):($.each(e.places,function(e,t){t.infowindow.close()}),e.opened_info.setPosition(a.reference.getCenter()),!0===e.settings.map_infowindow_customisations?e.opened_info.setContent('<div class="wpgmp_infowindow"><div class="wpgmp_iw_content">'+a.events.message+"</div></div>"):e.opened_info.setContent(a.events.message),e.opened_info.open(e.map,this))})),a.reference.setMap(e.map),e.wpgmp_circles.push(a.reference),a.events==undefined&&(a.events={},a.events.url="",a.events.message=""),e.wpgmp_shape_events.push({shape:a.reference,url:a.events.url,message:a.events.message})})},create_rectangle:function(){var e=this;$.each(this.map_data.shapes.shape.rectangles,function(t,a){var o=a.cordinates[0].split(","),i=a.cordinates[1].split(","),n=new google.maps.LatLngBounds(new google.maps.LatLng(o[0],o[1]),new google.maps.LatLng(i[0],i[1]));a.reference=new google.maps.Rectangle({bounds:n,fillColor:a.settings.fill_color,fillOpacity:a.settings.fill_opacity,strokeColor:a.settings.stroke_color,strokeOpacity:a.settings.stroke_opacity,strokeWeight:a.settings.stroke_weight}),void 0!==e.map_data.shapes&&(!0===e.map_data.shapes.drawing_editable?e.event_listener(a.reference,"click",function(){e.setSelection(a.reference),e.get_shapes_options(a.reference,"rectangle")}):a.events===undefined||""===a.events.url&&""===a.events.message||e.event_listener(a.reference,"click",function(){""!==a.events.url&&a.events.url!==undefined||""===a.events.message?""!==a.events.url&&"undefined"!==a.events.url&&a.events.url!==undefined&&(window.location=a.events.url):($.each(e.places,function(e,t){t.infowindow.close()}),e.opened_info.setPosition(a.reference.getBounds().getCenter()),!0===e.settings.map_infowindow_customisations?e.opened_info.setContent('<div class="wpgmp_infowindow"><div class="wpgmp_iw_content">'+a.events.message+"</div></div>"):e.opened_info.setContent(a.events.message),e.opened_info.open(e.map,this))})),a.reference.setMap(e.map),e.wpgmp_rectangles.push(a.reference),a.events==undefined&&(a.events={},a.events.url="",a.events.message=""),e.wpgmp_shape_events.push({shape:a.reference,url:a.events.url,message:a.events.message})})},get_shapes_options:function(e,t){$(".hiderow").show(),$("input[name='shape_fill_color']").val(e.fillColor),$("input[name='shape_fill_color']").parent().parent().find(".wp-color-result").css("background-color",e.fillColor),$("select[name='shape_fill_opacity']").val(e.fillOpacity),$("input[name='shape_stroke_color']").val(e.strokeColor),$("input[name='shape_stroke_color']").parent().parent().find(".wp-color-result").css("background-color",e.strokeColor),$("select[name='shape_stroke_opacity']").val(e.strokeOpacity),$("select[name='shape_stroke_weight']").val(e.strokeWeight),$("textarea[name='shape_path']").parent().hide(),$("input[name='shape_radius']").parent().hide(),$("input[name='shape_center']").parent().hide(),$("input[name='shape_northeast']").parent().hide(),$("input[name='shape_southwest']").parent().hide();var a=this.wpgmp_shape_events;if($.each(a,function(t,a){a.shape==e&&($("input[name='shape_click_url']").val(a.url),$("textarea[name='shape_click_message']").val(a.message))}),"circle"==t)$("input[name='shape_radius']").parent().show(),$("input[name='shape_radius']").val(e.getRadius()),$("input[name='shape_center']").parent().show(),$("input[name='shape_center']").val(e.getCenter().lat()+","+e.getCenter().lng());else if("rectangle"==t)$("input[name='shape_northeast']").parent().show(),$("input[name='shape_northeast']").val(e.getBounds().getNorthEast().lat()+","+e.getBounds().getNorthEast().lng()),$("input[name='shape_southwest']").parent().show(),$("input[name='shape_southwest']").val(e.getBounds().getSouthWest().lat()+","+e.getBounds().getSouthWest().lng());else{var o=[];e.getPath().forEach(function(e,t){var a=[e.lat(),e.lng()];""!==e.lat()&&""!==e.lng()&&o.push(a)}),$("textarea[name='shape_path']").parent().show(),$("textarea[name='shape_path']").val(o.join(" "))}},set_shapes_options:function(e){var t={fillColor:$("input[name='shape_fill_color']").val(),fillOpacity:$("select[name='shape_fill_opacity']").val(),strokeColor:$("input[name='shape_stroke_color']").val(),strokeOpacity:$("select[name='shape_stroke_opacity']").val(),strokeWeight:$("select[name='shape_stroke_weight']").val()};e.setOptions(t);var a=this.wpgmp_shape_events;$.each(a,function(t,a){a.shape==e&&(a.url=$("input[name='shape_click_url']").val(),a.message=$("textarea[name='shape_click_message']").val())})},wpgmp_save_shapes:function(e){$("input[name='shapes_values']").val(e.join("|"))},wpgmp_shape_complete:function(e,t){var a=this;a.setSelection(e),a.drawingmanager.setDrawingMode(null),void 0!==a.map_data.shapes&&!0===a.map_data.shapes.drawing_editable&&(a.event_listener(e,"click",function(){a.setSelection(e),a.get_shapes_options(e,t)}),a.wpgmp_shape_events.push({shape:e,url:"",message:""}))},wpgmp_save_polylines:function(){for(var e=[],t=this.wpgmp_polylines,a=this.wpgmp_shape_events,o=0;o<t.length;o++){var i=[],n=t[o].getPath(),s=t[o].strokeWeight+","+t[o].strokeOpacity+","+t[o].strokeColor,r="";$.each(a,function(e,a){a.shape==t[o]&&(r=a.url+"***"+a.message)}),n.forEach(function(e,t){var a=[e.lat(),e.lng()];i.push(a)}),e.push(i.join("----")+"..."+s+"..."+r)}return e},wpgmp_save_polygons:function(){for(var e=[],t=this.wpgmp_polygons,a=this.wpgmp_shape_events,o=0;o<t.length;o++){var i=[],n=t[o].getPath(),s=t[o].strokeWeight+","+t[o].strokeOpacity+","+t[o].strokeColor+","+t[o].fillColor+","+t[o].fillOpacity,r="";$.each(a,function(e,a){a.shape==t[o]&&(r=a.url+"***"+a.message)}),n.forEach(function(e,t){var a=[e.lat(),e.lng()];""!==e.lat()&&""!==e.lng()&&i.push(a)}),e.push(i.join("----")+"..."+s+"..."+r)}return e},wpgmp_save_circles:function(){for(var e=[],t=this.wpgmp_circles,a=this.wpgmp_shape_events,o=0;o<t.length;o++){var i=[],n=t[o].getCenter(),s=t[o].strokeWeight+","+t[o].strokeOpacity+","+t[o].strokeColor+","+t[o].fillColor+","+t[o].fillOpacity+","+t[o].getRadius(),r="";$.each(a,function(e,a){a.shape==t[o]&&(r=a.url+"***"+a.message)});var p=[n.lat(),n.lng()];""!==n.lat()&&""!==n.lng()&&i.push(p),e.push(i.join("----")+"..."+s+"..."+r)}return e},wpgmp_save_rectangles:function(){for(var e=[],t=this.wpgmp_rectangles,a=this.wpgmp_shape_events,o=0;o<t.length;o++){var i=[],n=t[o].strokeWeight+","+t[o].strokeOpacity+","+t[o].strokeColor+","+t[o].fillColor+","+t[o].fillOpacity,s="";$.each(a,function(e,a){a.shape==t[o]&&(s=a.url+"***"+a.message)});var r=t[o].getBounds().getSouthWest(),p=[r.lat(),r.lng()];""!==r.lat()&&""!==r.lng()&&i.push(p);p=[(r=t[o].getBounds().getNorthEast()).lat(),r.lng()];""!==r.lat()&&""!==r.lng()&&i.push(p),e.push(i.join("----")+"..."+n+"..."+s)}return e},set_kml_layer:function(){var e=this.map;$.each(this.map_data.kml_layer.kml_layers_links,function(t,a){var o={url:a,map:e,preserveViewport:!0};new google.maps.KmlLayer(o)})},set_fusion_layer:function(){new google.maps.FusionTablesLayer({query:{select:this.map_data.fusion_layer.fusion_table_select,from:this.map_data.fusion_layer.fusion_table_from},heatmap:{enabled:this.map_data.fusion_layer.fusion_heat_map},styles:[{markerOptions:{iconName:this.map_data.fusion_layer.fusion_icon_name}}]}).setMap(this.map)},set_marker_cluster:function(){var e=this,t=[],a=[{textColor:"black",url:e.map_data.marker_cluster.icon,height:32,width:33}];$.each(this.places,function(e,a){1==a.marker.visible&&t.push(a.marker)}),!0===e.map_data.marker_cluster.apply_style?(e.markerClusterer||(e.markerClusterer=new MarkerClusterer(e.map,{},{gridSize:parseInt(e.map_data.marker_cluster.grid),maxZoom:parseInt(e.map_data.marker_cluster.max_zoom),styles:a})),e.markerClusterer.clearMarkers(),e.markerClusterer.addMarkers(t),google.maps.event.addListener(e.markerClusterer,"mouseover",function(t){t.clusterIcon_.div_.firstChild.src=e.map_data.marker_cluster.hover_icon}),google.maps.event.addListener(e.markerClusterer,"mouseout",function(t){t.clusterIcon_.div_.firstChild.src=e.map_data.marker_cluster.icon})):(e.markerClusterer||(e.markerClusterer=new MarkerClusterer(e.map,{},{gridSize:parseInt(e.map_data.marker_cluster.grid),maxZoom:parseInt(e.map_data.marker_cluster.max_zoom),imagePath:e.map_data.marker_cluster.image_path})),e.markerClusterer.clearMarkers(),e.markerClusterer.addMarkers(t))},set_panning_control:function(){var e=this.map_data.panning_control,t=this.map,a=this,o=new google.maps.LatLngBounds(new google.maps.LatLng(e.from_latitude,e.from_longitude),new google.maps.LatLng(e.to_latitude,e.to_longitude));google.maps.event.addListener(t,"dragend",function(){if(!o.contains(t.getCenter())){var e=t.getCenter(),a=e.lng(),i=e.lat(),n=o.getNorthEast().lng(),s=o.getNorthEast().lat(),r=o.getSouthWest().lng(),p=o.getSouthWest().lat();a<r&&(a=r),a>n&&(a=n),i<p&&(i=p),i>s&&(i=s),t.setCenter(new google.maps.LatLng(i,a))}}),google.maps.event.addListener(t,"zoom_changed",function(){t.getZoom()<e.zoom_level&&t.setZoom(parseInt(a.settings.zoom))})},set_visual_refresh:function(){google.maps.visualRefresh=!0},set_45_imagery:function(){},set_overlay:function(){this.map.overlayMapTypes.insertAt(0,new overlay_generator(new google.maps.Size(this.map_data.overlay_setting.width,this.map_data.overlay_setting.height),this.map_data.overlay_setting))},set_bicyle_layer:function(){(new google.maps.BicyclingLayer).setMap(this.map)},set_traffic_layer:function(){(new google.maps.TrafficLayer).setMap(this.map)},set_panoramic_layer:function(){(new google.maps.panoramio.PanoramioLayer).setMap(this.map)},set_transit_layer:function(){(new google.maps.TransitLayer).setMap(this.map)},set_weather_layer:function(){var weatherLayer=new google.maps.weather.WeatherLayer({windSpeedUnit:eval("google.maps.weather.WindSpeedUnit."+this.map_data.weather_layer.wind_unit),temperatureUnits:eval("google.maps.weather.TemperatureUnit."+this.map_data.weather_layer.temperature_unit)});weatherLayer.setMap(this.map);var cloudLayer=new google.maps.weather.CloudLayer;cloudLayer.setMap(this.map)},set_streetview:function(e){var t={position:e,addressControlOptions:{position:google.maps.ControlPosition.BOTTOM_CENTER},linksControl:this.map_data.street_view.links_control,panControl:this.map_data.street_view.street_view_pan_control,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},enableCloseButton:this.map_data.street_view.street_view_close_button};this.map_data.street_view.pov_heading&&this.map_data.street_view.pov_pitch&&(t.pov={heading:parseInt(this.map_data.street_view.pov_heading),pitch:parseInt(this.map_data.street_view.pov_pitch)});new google.maps.StreetViewPanorama(this.element,t)},create_amenities_markers:function(e){var t=this;if(t.map_data.default_amenities){var a=e.dimension,o=e.radius,i=t.map_data.default_amenities.amenities,n=1.60934;if(t.amenity_infowindow=t.infowindow_marker,n="miles"==a?1.60934:1,o!=undefined){var s=parseInt(o)*n*1e3;if(i){var r=[];$.each(i,function(e,t){r.push(t)});for(var p=0;p<r.length;p++){if("undefined"!==t&&t.map_data.enableAmenitiesListing!=undefined&&t.map_data.display_amenities_by!=undefined&&"by_nearest"==t.map_data.display_amenities_by)var _={location:e.location,types:[r[p]],rankBy:google.maps.places.RankBy.DISTANCE};else _={location:e.location,radius:s,types:[r[p]]};new google.maps.places.PlacesService(t.map).nearbySearch(_,function(e,a,o){if(a==google.maps.places.PlacesServiceStatus.OK){for(var i=0;i<e.length;i++)t.createMarker(e[i]);"undefined"!==t&&t.map_data.enableAmenitiesListing!=undefined&&t.map_data.display_amenities_by!=undefined&&"by_radius"==t.map_data.display_amenities_by&&o&&o.hasNextPage&&o.nextPage()}})}}}}},map_loaded:function(){var e=this,t=e.map;if(google.maps.event.addListenerOnce(t,"idle",function(){var e=t.getCenter();google.maps.event.trigger(t,"resize"),t.setCenter(e)}),!0===e.settings.center_by_nearest&&e.center_by_nearest(),!0===e.settings.close_infowindow_on_map_click&&google.maps.event.addListener(t,"click",function(t){$.each(e.places,function(e,t){t.infowindow.close(),t.marker.setAnimation(null)})}),e.map_data.default_amenities){var a={dimension:e.map_data.default_amenities.dimension,radius:e.map_data.default_amenities.radius,location:e.map.getCenter()};e.create_amenities_markers(a)}google.maps.event.addListener(e.infobox,"domready",function(){var t=$(e.container).find(".infoBox");0==t.find(".fc-infowindow-default").length&&0==t.find(".fc-item-default").length&&t.find(".wpgmp_infowindow").length>0&&(t.find(".wpgmp_infowindow").prepend('<div class="infowindow-close"></div>'),$(".infowindow-close").click(function(t){t.preventDefault(),$.each(e.places,function(e,t){t.infowindow.close(),t.marker.setAnimation(null)})}),$(t).on("click",".fc-accordion-tab",function(){if($(this).hasClass("active")){$(this).removeClass("active");$(this).next().removeClass("active")}else{$(".fc-accordion-tab").removeClass("active"),$(".fc-accordion dd").removeClass("active"),$(this).addClass("active");$(this).next().addClass("active")}}),0==t.find(".fc-infowindow-fano").length&&0==t.find(".fc-item-fano").length?t.addClass("infoBoxTail"):t.removeClass("infoBoxTail"))}),!0===e.settings.map_infowindow_customisations&&google.maps.event.addListener(e.infowindow_marker,"domready",function(){var t=$(e.container).find(".gm-style-iw");e.settings.infowindow_width;t.next().css("display","none");var a=t.prev();a.children(":nth-child(2)").css({display:"none"}),a.children(":nth-child(3)").css({"background-color":"#000;"}),a.children(":nth-child(4)").css({display:"none"});var o=t.outerHeight();a.children(":nth-child(3)").css({top:o+14+"px"}),a.children(":nth-child(1)").css({top:o+6+"px"}),a.children(":nth-child(3)").find("div").children().css({"box-shadow":e.settings.infowindow_border_color+" 0px 1px 6px",border:"1px solid "+e.settings.infowindow_border_color,"border-top":"","z-index":"1","background-color":e.settings.infowindow_bg_color}),t.on("click",".infowindow-close",function(t){$.each(e.places,function(e,t){t.infowindow.close(),t.marker.setAnimation(null)})})})},resize_map:function(){var e=this.map,t=e.getZoom(),a=e.getCenter();google.maps.event.trigger(this.map,"resize"),e.setZoom(t),e.setCenter(a)},responsive_map:function(){var e=this,t=e.map;google.maps.event.addDomListener(window,"resize",function(){var a=t.getZoom(),o=t.getCenter();google.maps.event.trigger(t,"resize"),t.setZoom(a),t.setCenter(o),t.getBounds(),e.map_data.marker_cluster&&e.set_marker_cluster()})},show_search_control:function(){var map_obj=this,input=$(map_obj.container).find('[data-input="map-search-control"]')[0];if(input!==undefined){var searchBox=new google.maps.places.Autocomplete(input),marker=new google.maps.Marker({icon:map_obj.settings.marker_default_icon,draggable:!1,map:map_obj.map});map_obj.marker_bind(marker),wpgmp_local.wpgmp_country_specific&&1==wpgmp_local.wpgmp_country_specific&&searchBox.setComponentRestrictions({country:wpgmp_local.wpgmp_countries}),map_obj.map.controls[eval("google.maps.ControlPosition."+map_obj.settings.search_control_position)].push(input),searchBox.bindTo("bounds",map_obj.map),google.maps.event.addListener(searchBox,"place_changed",function(){var e=searchBox.getPlace();map_obj.settings.zoom_level_after_search!=undefined?map_obj.map.setZoom(parseInt(map_obj.settings.zoom_level_after_search)):map_obj.map.setZoom(parseInt(10)),map_obj.map.setCenter(e.geometry.location),marker.setPosition(e.geometry.location),marker.setVisible(!0)})}},fit_bounds:function(){var e=this.map_data.places,t=new google.maps.LatLngBounds;e!==undefined&&e.forEach(function(e){e.location.lat&&e.location.lng&&t.extend(new google.maps.LatLng(parseFloat(e.location.lat),parseFloat(e.location.lng)))}),this.map.fitBounds(t)},create_markers:function(){var e=this,t=e.map_data.places,a=[];$.each(t,function(t,o){if(o.location.lat&&o.location.lng){void 0===o.categories&&(o.categories={}),void 0===o.location.icon&&(o.location.icon=e.settings.marker_default_icon),o.marker=new google.maps.Marker({position:new google.maps.LatLng(parseFloat(o.location.lat),parseFloat(o.location.lng)),icon:o.location.icon,url:o.url,draggable:o.location.draggable,map:e.map,clickable:o.location.infowindow_disable}),!0===e.settings.infowindow_drop_animation&&o.marker.setAnimation(google.maps.Animation.DROP),"DROP"==o.location.animation&&o.marker.setAnimation(google.maps.Animation.DROP),"BOUNCE1"==o.location.animation&&o.marker.setAnimation(google.maps.Animation.BOUNCE),!0===e.settings.infowindow_filter_only&&(o.marker.visible=!1,o.marker.setVisible(!1)),"edit_location"==e.map_data.page&&e.marker_bind(o.marker);var i=[];if(void 0!==o.categories)for(var n in o.categories)i.push(o.categories[n].name);var s="",r="";r="post"==o.source?o.location.extra_fields.post_featured_image:o.location.marker_image;var p="",_="fc-infowindow-";"post"==o.source?(p=e.settings.infowindow_geotags_setting,_="wpgmp_infowindow_post fc-item-"+e.settings.infowindow_post_skin.name):(p=e.settings.infowindow_setting,"edit_location"!=e.map_data.page&&e.settings.infowindow_skin&&(_="fc-infowindow-"+e.settings.infowindow_skin.name)),void 0===p&&(p=o.content);var c={"{marker_id}":o.id,"{marker_title}":o.title,"{marker_address}":o.address,"{marker_latitude}":o.location.lat,"{marker_longitude}":o.location.lng,"{marker_city}":o.location.city,"{marker_state}":o.location.state,"{marker_country}":o.location.country,"{marker_postal_code}":o.location.postal_code,"{marker_zoom}":o.location.zoom,"{marker_icon}":o.location.icon,"{marker_category}":i.join(", "),"{marker_message}":o.content,"{marker_image}":r,"{get_directions_link}":"http://www.google.com/maps/place/"+parseFloat(o.location.lat)+","+parseFloat(o.location.lng)};if(void 0!==o.location.extra_fields)for(var l in o.location.extra_fields)o.location.extra_fields[l]?c["{"+l+"}"]=o.location.extra_fields[l]:c["{"+l+"}"]="<div class='wpgmp_empty'>wpgmp_empty</div>";for(var m in c)c[m]!=undefined&&"undefined"!=c[m]||(c[m]="");if(p){var d=p=p.replace(/{[^{}]+}/g,function(e){return e in c?c[e]:""}),g=$("<div/>").html(d);$(g).find(".wpgmp_extra_field:contains('wpgmp_empty')").remove(),$(g).find(".wpgmp_empty").prev().remove(),$(g).find(".wpgmp_empty").remove(),s=$(g).prop("outerHTML").toString()}s=""===s?!0===e.settings.map_infowindow_customisations&&!0===e.settings.show_infowindow_header?'<div class="wpgmp_infowindow '+_+'"><div class="wpgmp_iw_head"><div class="wpgmp_iw_head_content">'+o.title+'</div></div><div class="wpgmp_iw_content">'+o.content+"</div></div>":'<div class="wpgmp_infowindow '+_+'"><div class="wpgmp_iw_content">'+o.content+"</div></div>":!0===e.settings.map_infowindow_customisations&&!0===e.settings.show_infowindow_header?'<div class="wpgmp_infowindow '+_+'"><div class="wpgmp_iw_head"><div class="wpgmp_iw_head_content">'+o.title+'</div></div><div class="wpgmp_iw_content">'+s+"</div></div>":'<div class="wpgmp_infowindow '+_+'"><div class="wpgmp_iw_content">'+s+"</div></div>",o.infowindow_data=s,o.infowindow=e.infowindow_marker,!0===o.location.infowindow_default_open?e.openInfoWindow(o):!0===e.settings.default_infowindow_open&&e.openInfoWindow(o);var u=e.settings.infowindow_open_event,h=e.settings.infowindow_bounce_animation;e.event_listener(o.marker,u,function(){$.each(e.places,function(e,t){t.infowindow.close(),t.marker.setAnimation(null)}),e.openInfoWindow(o),"click"==h&&e.toggle_bounce(o.marker)}),"mouseover"==u&&e.event_listener(o.marker,"click",function(){void 0!==e.settings.infowindow_click_change_zoom&&e.settings.infowindow_click_change_zoom>0&&e.map.setZoom(e.settings.infowindow_click_change_zoom),void 0!==e.settings.infowindow_click_change_center&&1==e.settings.infowindow_click_change_center&&e.map.setCenter(o.marker.getPosition())}),"mouseover"==h&&"mouseover"!=u&&(e.event_listener(o.marker,"mouseover",function(){o.marker.setAnimation(google.maps.Animation.BOUNCE)}),e.event_listener(o.marker,"mouseout",function(){o.marker.setAnimation(null)})),""!=h&&google.maps.event.addListener(o.infowindow,"closeclick",function(){o.marker.setAnimation(null)}),e.places.push(o)}else a.push(t)}),$.each(a,function(e,a){t.splice(a,1)})},toggle_bounce:function(e){null!==e.getAnimation()?e.setAnimation(null):e.setAnimation(google.maps.Animation.BOUNCE)},display_markers:function(){this.show_places=[],this.categories=[];for(var e={},t=0;t<this.places.length;t++)this.places[t].marker.setMap(this.map),!0===this.places[t].marker.visible&&this.show_places.push(this.places[t]),void 0!==this.places[t].categories&&$.each(this.places[t].categories,function(t,a){void 0===e[a.name]&&(e[a.name]=a)});this.categories=e},show_center_circle:function(){""==this.settings.center_circle_radius&&(this.settings.center_circle_radius=5),this.set_center_circle=new google.maps.Circle({map:this.map,center:this.map.getCenter(),fillColor:this.settings.center_circle_fillcolor,fillOpacity:this.settings.center_circle_fillopacity,strokeColor:this.settings.center_circle_strokecolor,strokeOpacity:this.settings.center_circle_strokeopacity,strokeWeight:this.settings.center_circle_strokeweight,radius:1e3*parseInt(this.settings.center_circle_radius)})},show_center_marker:function(){var e=this,t=!1;""!=e.settings.center_marker_infowindow&&(t=!0),e.map_center_marker=new google.maps.Marker({position:e.map.getCenter(),title:e.settings.center_marker_infowindow,map:e.map,icon:e.settings.center_marker_icon,clickable:t}),void 0===e.map_center_info&&(e.map_center_info=e.infowindow_marker),""!=e.settings.center_marker_infowindow&&google.maps.event.addListener(e.map_center_marker,"click",function(){e.map_center_info.setPosition(e.map.getCenter()),!0===e.settings.map_infowindow_customisations?e.map_center_info.setContent('<div class="wpgmp_infowindow"><div class="wpgmp_iw_content">'+e.settings.center_marker_infowindow+"</div></div>"):e.map_center_info.setContent(e.settings.center_marker_infowindow),e.map_center_info.open(e.map,this)})},center_by_nearest:function(){var e=this;this.get_current_location(function(t){e.user_location_marker||(e.user_location_marker=new google.maps.Marker({position:t,title:wpgmp_local.center_location_message,map:e.map,icon:e.settings.marker_default_icon})),e.user_location_marker.setVisible(!0),void 0===e.map_center_info&&(e.map_center_info=e.infowindow_marker),""!=e.settings.center_marker_infowindow&&google.maps.event.addListener(e.user_location_marker,"click",function(){e.map_center_info.setPosition(t),!0===e.settings.map_infowindow_customisations?e.map_center_info.setContent('<div class="wpgmp_infowindow"><div class="wpgmp_iw_content">'+e.settings.center_marker_infowindow+"</div></div>"):e.map_center_info.setContent(e.settings.center_marker_infowindow),e.map_center_info.open(e.map,this)}),e.map.setCenter(t),!0===e.settings.show_center_circle&&e.show_center_circle(),e.map_data.listing&&1==e.map_data.listing.apply_default_radius&&(e.search_area=t)})},get_current_location:function(e,t){var a=this;void 0===a.user_location?navigator.geolocation.getCurrentPosition(function(t){a.user_location=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),e&&e(a.user_location)},function(e){console.log(e),t&&t(e)},{enableHighAccuracy:!0,timeout:5e4,maximumAge:0}):e&&e(a.user_location)},openInfoWindow:function(e){var t="default";if("post"==e.source?t=this.settings.infowindow_post_skin.name:"edit_location"!=this.map_data.page&&this.settings.infowindow_skin&&(t=this.settings.infowindow_skin.name),"default"!=t){var a=document.createElement("div");a.className="wpgmp_infobox";var o={content:a,disableAutoPan:!1,alignBottom:!0,maxWidth:0,pixelOffset:"fano"==t?new google.maps.Size(-150,-40):new google.maps.Size(-150,-55),zIndex:null,boxStyle:{width:"300px"},closeBoxMargin:"0",closeBoxURL:"",infoBoxClearance:new google.maps.Size(25,25),isHidden:!1,pane:"floatPane",enableEventPropagation:!1};e.infowindow=this.infobox,e.infowindow.setOptions(o),a.innerHTML=e.infowindow_data}else e.infowindow=this.infowindow_marker,e.infowindow.setContent(e.infowindow_data);"post"==e.location.onclick_action?"yes"==e.location.open_new_tab?window.open(e.location.redirect_permalink,"_blank"):window.open(e.location.redirect_permalink,"_self"):"custom_link"==e.location.onclick_action?"yes"==e.location.open_new_tab?window.open(e.location.redirect_custom_link,"_blank"):window.open(e.location.redirect_custom_link,"_self"):(e.infowindow.open(this.map,e.marker),void 0!==this.settings.infowindow_open_event&&"click"==this.settings.infowindow_open_event&&void 0!==this.settings.infowindow_click_change_center&&1==this.settings.infowindow_click_change_center&&this.map.setCenter(e.marker.getPosition()),void 0!==this.settings.infowindow_open_event&&"click"==this.settings.infowindow_open_event&&void 0!==this.settings.infowindow_click_change_zoom&&this.settings.infowindow_click_change_zoom>0&&this.map.setZoom(this.settings.infowindow_click_change_zoom),this.map_data.map_tabs&&this.map_data.map_tabs.direction_tab&&!0===this.map_data.map_tabs.direction_tab.dir_tab&&$(this.container).find(".start_point").val(e.address)),$(this.container).find(".wpgmp_extra_field:contains('wpgmp_empty')").remove(),$(this.container).find(".wpgmp_empty").prev().remove(),$(this.container).find(".wpgmp_empty").remove()}},$.fn.maps=function(e,t){return this.each(function(){$.data(this,"wpgmp_maps")||$.data(this,"wpgmp_maps",new GoogleMaps(this,e,t))}),this}}(jQuery,window,document);
